{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shesafe\\\\client\\\\src\\\\Pages\\\\Dashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport MapView from '../components/MapView';\n\n// --- CONFIG: FIXED TO LOCALHOST ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000';\n\n// --- STYLES ---\nconst DashboardStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    .dashboard-layout { display: flex; height: calc(100vh - 70px); background-color: #f8f9fa; position: relative; font-family: 'Segoe UI', sans-serif; }\n    .map-column { flex: 3; background-color: #e9ecef; position: relative; }\n    .controls-column { flex: 2; background-color: #f8f9fa; padding: 2rem; display: flex; flex-direction: column; overflow-y: auto; gap: 1.5rem; }\n    .dashboard-card { background: #ffffff; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); border: 1px solid #f1f3f5; display: flex; flex-direction: column; }\n    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #f8f9fa; }\n    .card-header h3 { margin: 0; font-size: 1.25rem; color: #212529; font-weight: 700; }\n    .manage-link { text-decoration: none; color: #007bff; font-weight: 600; font-size: 0.9rem; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.2s; }\n    .manage-link:hover { background-color: #e7f5ff; }\n    .destination-form label { font-weight: 600; color: #495057; display: block; margin-bottom: 0.5rem; font-size: 0.9rem; }\n    .search-input-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; }\n    .search-input-group input { flex-grow: 1; padding: 12px; border: 1px solid #dee2e6; border-radius: 8px; font-size: 1rem; transition: border-color 0.2s; }\n    .search-input-group button { background: linear-gradient(135deg, #6f42c1, #512da8); color: white; border: none; border-radius: 8px; padding: 0 1.2rem; cursor: pointer; font-weight: 600; }\n    .results-section { margin-bottom: 1rem; max-height: 180px; overflow-y: auto; border: 1px solid #e9ecef; border-radius: 8px; }\n    .results-list { list-style: none; padding: 0; margin: 0; }\n    .results-list li { padding: 10px 15px; border-bottom: 1px solid #f1f3f5; cursor: pointer; font-size: 0.9rem; color: #495057; transition: background 0.2s; }\n    .results-list li:hover { background-color: #f8f9fa; color: #b8369a; }\n    .contact-list { display: flex; flex-direction: column; gap: 0.5rem; }\n    .contact-item { display: flex; align-items: center; padding: 10px; border-radius: 8px; border: 1px solid transparent; transition: background 0.2s; }\n    .contact-item:hover { background-color: #f8f9fa; border-color: #e9ecef; }\n    .contact-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%); color: white; display: grid; place-items: center; font-weight: bold; margin-right: 12px; font-size: 1.1rem; }\n    .contact-details strong { display: block; color: #343a40; font-size: 0.95rem; }\n    .contact-details span { color: #868e96; font-size: 0.85rem; }\n    .start-trip-button { width: 100%; padding: 14px; margin-top: 10px; background: linear-gradient(135deg, #b8369a 0%, #6a11cb 100%); color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 1.1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(184, 54, 154, 0.3); transition: transform 0.1s; }\n    .status-title { color: #28a745; font-size: 1.6rem; margin-bottom: 1rem; font-weight: 800; text-align: center; }\n    .timer-display { text-align: center; margin: 1.5rem 0; }\n    .timer-display p { margin: 0; color: #adb5bd; font-size: 0.85rem; letter-spacing: 1px; font-weight: 700; }\n    .timer-display span { font-size: 3.5rem; font-weight: 800; color: #212529; font-variant-numeric: tabular-nums; }\n    .trip-actions { display: flex; gap: 1rem; margin-top: 1rem; }\n    .share-button { flex: 1; padding: 12px; background: #e7f5ff; color: #007bff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: background 0.2s; }\n    .end-trip-button { flex: 1; padding: 12px; background: #ffe3e3; color: #e03131; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: background 0.2s; }\n    .sos-btn-floating { position: absolute; bottom: 30px; right: 30px; width: 80px; height: 80px; background: radial-gradient(circle, #ff4d4d 0%, #b30000 100%); border: 4px solid white; border-radius: 50%; color: white; font-weight: 800; font-size: 1.3rem; box-shadow: 0 8px 20px rgba(220, 38, 38, 0.4); cursor: pointer; z-index: 1000; animation: pulse 2s infinite; transition: transform 0.2s; }\n    .safe-check-box { background: #fff3cd; border: 2px solid #ffeeba; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center; }\n    .safe-timer { font-size: 1.8rem; font-weight: 800; color: #856404; display: block; margin: 5px 0; }\n    .btn-im-safe { background: #28a745; color: white; border: none; padding: 8px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2); }\n    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(4px); }\n    .modal-content { background: white; width: 90%; max-width: 420px; padding: 2rem; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.2); }\n    .modal-header { display: flex; justify-content: space-between; margin-bottom: 1.5rem; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 1rem; }\n    .share-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f1f3f5; }\n    .wa-btn { background: #25D366; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.9rem; text-decoration: none; display: flex; align-items: center; gap: 6px; }\n    .sos-countdown-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(220, 38, 38, 0.95); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; }\n    .countdown-number { font-size: 10rem; font-weight: 800; margin: 20px 0; }\n    .btn-cancel-sos { background: white; color: #dc2626; padding: 15px 40px; font-size: 1.5rem; font-weight: bold; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }\n    .search-error { color: #dc3545; font-size: 0.9rem; margin-top: 5px; }\n\n    /* YOUR SAFETY SCORE STYLES */\n    .safety-card { padding: 1rem; border-radius: 10px; margin-bottom: 1rem; text-align: center; border: 1px solid transparent; }\n    .safety-score-high { background: #d1fae5; border-color: #10b981; color: #065f46; } \n    .safety-score-med { background: #fef3c7; border-color: #f59e0b; color: #92400e; }\n    .safety-score-low { background: #fee2e2; border-color: #ef4444; color: #991b1b; }\n    .score-value { font-size: 2.2rem; font-weight: 800; display: block; margin: 5px 0; }\n    .score-label { font-size: 0.8rem; text-transform: uppercase; font-weight: 700; letter-spacing: 1px; opacity: 0.8; }\n\n    /* NEW ZONE BTN & ALERTS */\n    .zone-btn { background: #fff; border: 1px solid #ced4da; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; color: #495057; font-size: 0.8rem; float: right; transition: all 0.2s; }\n    .zone-btn.active { background: #e7f5ff; border-color: #007bff; color: #007bff; }\n    \n    .dashboard-alert { \n        position: fixed; top: 20px; left: 50%; transform: translateX(-50%); \n        z-index: 3000; padding: 15px 25px; border-radius: 50px; \n        font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3);\n        color: white; animation: slideDown 0.5s;\n    }\n    .alert-danger { background: #dc3545; }\n    .alert-safe { background: #28a745; }\n    @keyframes slideDown { from { top: -50px; } to { top: 20px; } }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 3\n}, this);\n_c = DashboardStyles;\nconst TripStatusPanel = ({\n  tripDetails,\n  onEndTrip,\n  contacts,\n  onSOS,\n  safeCheckSeconds,\n  handleImSafe\n}) => {\n  _s();\n  const [time, setTime] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  useEffect(() => {\n    if (!(tripDetails !== null && tripDetails !== void 0 && tripDetails.startedAt)) return;\n    const start = new Date(tripDetails.startedAt);\n    const i = setInterval(() => setTime(Math.floor((new Date() - start) / 1000)), 1000);\n    return () => clearInterval(i);\n  }, [tripDetails]);\n  const format = s => new Date(s * 1000).toISOString().substr(11, 8);\n  const handleWhatsAppShare = contact => {\n    const link = `${window.location.origin}/track/${tripDetails._id}`;\n    const msg = `ðŸš¨ I started a SafeWalk trip! \\n\\nTrack my live location here:\\n${link}`;\n    const phone = contact.phone.replace(/[^0-9]/g, '');\n    window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(msg)}`, '_blank');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"panel-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"status-title\",\n        children: \"Trip in Progress\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), safeCheckSeconds !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"safe-check-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            fontWeight: 'bold',\n            color: '#856404'\n          },\n          children: \"SAFE CHECK IN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"safe-timer\",\n          style: {\n            color: safeCheckSeconds < 30 ? '#dc3545' : '#856404'\n          },\n          children: [Math.floor(safeCheckSeconds / 60), \":\", String(safeCheckSeconds % 60).padStart(2, '0')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-im-safe\",\n          onClick: handleImSafe,\n          children: \"I'm Safe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"ELAPSED TIME\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: format(time)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 67\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trip-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"share-button\",\n          onClick: () => setShowModal(true),\n          children: \"Share Link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"end-trip-button\",\n          onClick: onEndTrip,\n          children: \"End Trip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"sos-btn-floating\",\n      onClick: onSOS,\n      children: \"SOS\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Share with...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowModal(false),\n            style: {\n              border: 'none',\n              background: 'none',\n              fontSize: '1.5rem'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 77\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this), contacts.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"share-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: c.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 38\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 63\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: c.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 68\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"wa-btn\",\n            onClick: () => handleWhatsAppShare(c),\n            children: \"Share on WhatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 33\n          }, this)]\n        }, c._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n};\n_s(TripStatusPanel, \"3Inj1LqwtuJrT0Maksuupa9xDIE=\");\n_c2 = TripStatusPanel;\nconst BeforeTripPanel = ({\n  contacts,\n  loading,\n  searchTerm,\n  setSearchTerm,\n  onSearch,\n  results,\n  onSelectDest,\n  dest,\n  onStart,\n  searchError,\n  setSafeCheckInterval,\n  safetyScore,\n  isCreatingZone,\n  toggleZoneMode\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"panel-container\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-card trip-planning-module\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Start a New Trip\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `zone-btn ${isCreatingZone ? 'active' : ''}`,\n        onClick: toggleZoneMode,\n        children: isCreatingZone ? 'Tap Map to Save' : '+ Add Safe Zone'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"destination-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Where are you going?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search destination...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onSearch,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }, this), searchError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"search-error\",\n        children: searchError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }, this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-section\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"results-list\",\n          children: results.slice(0, 5).map(r => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => onSelectDest({\n              lat: r.lat,\n              lon: r.lon,\n              display_name: r.display_name\n            }),\n            style: {\n              background: (dest === null || dest === void 0 ? void 0 : dest.place_id) === r.place_id ? '#f3e5f5' : ''\n            },\n            children: r.display_name\n          }, r.place_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }, this), dest && safetyScore !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `safety-card ${safetyScore >= 75 ? 'safety-score-high' : safetyScore >= 40 ? 'safety-score-med' : 'safety-score-low'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"score-label\",\n          children: \"Route Safety Score\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"score-value\",\n          children: [safetyScore, \"/100\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.9rem',\n            fontWeight: 600\n          },\n          children: safetyScore >= 75 ? \"Safe Route âœ…\" : safetyScore >= 40 ? \"Moderate Caution âš ï¸\" : \"High Risk Area â›”\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '15px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Safe Check Interval:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          style: {\n            width: '100%',\n            padding: '12px',\n            borderRadius: '8px',\n            border: '1px solid #ced4da'\n          },\n          onChange: e => setSafeCheckInterval(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Off (Manual SOS only)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"15\",\n            children: \"15 Minutes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"30\",\n            children: \"30 Minutes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"start-trip-button\",\n        onClick: onStart,\n        disabled: !dest,\n        children: \"Start SafeWalk Trip\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-card contacts-module\",\n    style: {\n      flexGrow: 1,\n      marginTop: '20px',\n      overflowY: 'auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Trusted Contacts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/contacts\",\n        className: \"manage-link\",\n        children: \"Manage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 65\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contact-list\",\n      children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading contacts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }, this), contacts.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contact-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contact-avatar\",\n          children: c.name.charAt(0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contact-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: c.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 50\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: c.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 75\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }, this)]\n      }, c._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 138,\n  columnNumber: 5\n}, this);\n_c3 = BeforeTripPanel;\nconst Dashboard = () => {\n  _s2();\n  const [isActive, setIsActive] = useState(false);\n  const [contacts, setContacts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  const [destination, setDestination] = useState(null);\n  const [tripDetails, setTripDetails] = useState(null);\n  const [userPos, setUserPos] = useState({\n    lat: 26.7606,\n    lng: 83.3732\n  });\n  const [searchError, setSearchError] = useState('');\n  const [safeCheckInterval, setSafeCheckInterval] = useState(null);\n  const [safeCheckSeconds, setSafeCheckSeconds] = useState(null);\n  const [sosCountdown, setSosCountdown] = useState(null);\n  const [safetyScore, setSafetyScore] = useState(null);\n\n  // --- NEW ZONES STATE ---\n  const [zones, setZones] = useState([]);\n  const [isCreatingZone, setIsCreatingZone] = useState(false);\n  const [alertMsg, setAlertMsg] = useState(null);\n  const enteredZones = useRef(new Set());\n  const startPosRef = useRef(null);\n  const socketRef = useRef(null);\n  const watchIdRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    socketRef.current = io(API_URL);\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    const fetchData = async () => {\n      try {\n        // Parallel Fetch\n        const [cRes, zRes] = await Promise.all([axios.get(`${API_URL}/api/contacts`, {\n          headers: {\n            'x-auth-token': token\n          }\n        }), axios.get(`${API_URL}/api/zones`, {\n          headers: {\n            'x-auth-token': token\n          }\n        })]);\n        setContacts(cRes.data);\n        setZones(zRes.data);\n      } catch (e) {\n        console.error(e);\n      }\n      setLoading(false);\n    };\n    fetchData();\n\n    // MAIN GPS LOOP\n    watchIdRef.current = navigator.geolocation.watchPosition(p => {\n      const coords = {\n        lat: p.coords.latitude,\n        lng: p.coords.longitude\n      };\n      setUserPos(coords);\n\n      // 1. Check Zones (Feature 1 & 2)\n      checkZones(coords, zones);\n\n      // 2. Check Route Deviation (Feature 3)\n      if (isActive && destination && startPosRef.current) {\n        checkRouteDeviation(coords, startPosRef.current, destination);\n      }\n      if (tripDetails !== null && tripDetails !== void 0 && tripDetails._id) {\n        socketRef.current.emit('updateLocation', {\n          tripId: tripDetails._id,\n          coordinates: coords\n        });\n      }\n    }, e => console.error(\"Loc Error\", e), {\n      enableHighAccuracy: true\n    });\n    return () => {\n      if (socketRef.current) socketRef.current.disconnect();\n      if (watchIdRef.current) navigator.geolocation.clearWatch(watchIdRef.current);\n    };\n  }, [navigate, zones, tripDetails, isActive, destination]);\n\n  // --- FEATURE 1 & 2: ZONE LOGIC ---\n  const checkZones = (coords, currentZones) => {\n    const getDist = (lat1, lon1, lat2, lon2) => {\n      const R = 6371e3;\n      const Ï†1 = lat1 * Math.PI / 180,\n        Ï†2 = lat2 * Math.PI / 180;\n      const Î”Ï† = (lat2 - lat1) * Math.PI / 180,\n        Î”Î» = (lon2 - lon1) * Math.PI / 180;\n      const a = Math.sin(Î”Ï† / 2) * Math.sin(Î”Ï† / 2) + Math.cos(Ï†1) * Math.cos(Ï†2) * Math.sin(Î”Î» / 2) * Math.sin(Î”Î» / 2);\n      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    };\n    currentZones.forEach(zone => {\n      const dist = getDist(coords.lat, coords.lng, zone.location.lat, zone.location.lng);\n      const isInside = dist < (zone.radius || 200);\n      const hour = new Date().getHours();\n      const start = zone.activeStartHour || 0;\n      const end = zone.activeEndHour || 24;\n      const isActiveTime = start < end ? hour >= start && hour < end : hour >= start || hour < end;\n      if (isInside && isActiveTime) {\n        if (!enteredZones.current.has(zone._id)) {\n          enteredZones.current.add(zone._id);\n          if (zone.type === 'Safe') {\n            setAlertMsg({\n              text: `ðŸ›¡ï¸ Entered Safe Zone: ${zone.name}`,\n              type: 'safe'\n            });\n            if (tripDetails) socketRef.current.emit('zoneAlert', {\n              tripId: tripDetails._id,\n              message: `Entered Safe Zone: ${zone.name}`\n            });\n          } else {\n            setAlertMsg({\n              text: `âš ï¸ WARNING: Unsafe Area (${zone.name})`,\n              type: 'danger'\n            });\n            setTimeout(() => {\n              if (enteredZones.current.has(zone._id)) setSafeCheckSeconds(30);\n            }, 600000);\n          }\n          setTimeout(() => setAlertMsg(null), 5000);\n        }\n      } else {\n        if (enteredZones.current.has(zone._id)) {\n          enteredZones.current.delete(zone._id);\n          if (zone.type === 'Safe') {\n            setAlertMsg({\n              text: `Left Safe Zone: ${zone.name}`,\n              type: 'danger'\n            });\n            if (tripDetails) socketRef.current.emit('zoneAlert', {\n              tripId: tripDetails._id,\n              message: `Left Safe Zone: ${zone.name}`\n            });\n            setTimeout(() => setAlertMsg(null), 5000);\n          }\n        }\n      }\n    });\n  };\n\n  // --- FEATURE 3: ROUTE DEVIATION ---\n  const checkRouteDeviation = (current, start, end) => {\n    const numer = Math.abs((end.lat - start.lat) * (start.lng - current.lng) - (start.lat - current.lat) * (end.lon - start.lng));\n    const denom = Math.sqrt(Math.pow(end.lat - start.lat, 2) + Math.pow(end.lon - start.lng, 2));\n    const distDegrees = numer / denom;\n    const distMeters = distDegrees * 111000;\n    if (distMeters > 500) {\n      setAlertMsg({\n        text: \"âš ï¸ OFF ROUTE DETECTED!\",\n        type: 'danger'\n      });\n      setTimeout(() => setAlertMsg(null), 5000);\n    }\n  };\n  const handleMapClick = async latlng => {\n    var _prompt;\n    if (!isCreatingZone) return;\n    const name = prompt(\"Zone Name:\");\n    if (!name) return;\n    const type = ((_prompt = prompt(\"Type 'S' for Safe, 'D' for Danger:\")) === null || _prompt === void 0 ? void 0 : _prompt.toLowerCase()) === 'd' ? 'Danger' : 'Safe';\n    const token = localStorage.getItem('token');\n    try {\n      const res = await axios.post(`${API_URL}/api/zones`, {\n        name,\n        type,\n        lat: latlng.lat,\n        lng: latlng.lng\n      }, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setZones([...zones, res.data]);\n      setIsCreatingZone(false);\n      alert(\"Zone Added\");\n    } catch (e) {\n      alert(\"Error adding zone\");\n    }\n  };\n  const calculateSafetyScore = async (destLat, destLon) => {\n    try {\n      const res = await axios.get(`${API_URL}/api/incidents`);\n      let nearby = 0;\n      res.data.forEach(inc => {\n        if (Math.abs(inc.location.lat - destLat) < 0.02 && Math.abs(inc.location.lng - destLon) < 0.02) nearby++;\n      });\n      setSafetyScore(Math.max(30, 100 - nearby * 15));\n    } catch (e) {\n      setSafetyScore(null);\n    }\n  };\n  const handleSearch = async () => {\n    try {\n      const res = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${searchTerm}`);\n      setResults(res.data);\n    } catch (e) {}\n  };\n  const handleSelectDest = d => {\n    setDestination(d);\n    calculateSafetyScore(parseFloat(d.lat), parseFloat(d.lon));\n  };\n  const startTrip = async () => {\n    if (!destination) return alert(\"Select Destination\");\n    const token = localStorage.getItem('token');\n    try {\n      const res = await axios.post(`${API_URL}/api/trips/start`, {\n        destination: {\n          name: destination.display_name,\n          lat: destination.lat,\n          lon: destination.lon\n        }\n      }, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setTripDetails(res.data);\n      setIsActive(true);\n      startPosRef.current = userPos; // Mark start\n      if (safeCheckInterval) setSafeCheckSeconds(parseInt(safeCheckInterval) * 60);\n      socketRef.current.emit('joinTripRoom', res.data._id);\n    } catch (e) {\n      alert(\"Error starting trip.\");\n    }\n  };\n\n  // --- SOS COUNTDOWN (PRESERVED) ---\n  useEffect(() => {\n    if (isActive && safeCheckSeconds !== null && sosCountdown === null) {\n      const t = setInterval(() => setSafeCheckSeconds(p => {\n        if (p <= 1) {\n          setSosCountdown(5);\n          return parseInt(safeCheckInterval) * 60;\n        }\n        return p - 1;\n      }), 1000);\n      return () => clearInterval(t);\n    }\n  }, [isActive, safeCheckSeconds, sosCountdown]);\n  useEffect(() => {\n    if (sosCountdown !== null) {\n      if (sosCountdown > 0) setTimeout(() => setSosCountdown(sosCountdown - 1), 1000);else {\n        if (tripDetails) {\n          socketRef.current.emit('sosTriggered', tripDetails._id);\n          alert(\"SOS SENT!\");\n        }\n        setSosCountdown(null);\n      }\n    }\n  }, [sosCountdown]);\n  const handleImSafe = async () => {\n    if (safeCheckInterval) setSafeCheckSeconds(parseFloat(safeCheckInterval) * 60);\n    socketRef.current.emit('sosCancelled', tripDetails._id);\n    alert(\"Marked Safe.\");\n  };\n  const endTrip = async () => {\n    socketRef.current.emit('endTrip', tripDetails._id);\n    const token = localStorage.getItem('token');\n    try {\n      await axios.post(`${API_URL}/api/trips/${tripDetails._id}/end`, {}, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n    } catch (e) {}\n    setIsActive(false);\n    setTripDetails(null);\n    setDestination(null);\n    setSearchTerm('');\n    setResults([]);\n    setSafetyScore(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-layout\",\n    children: [/*#__PURE__*/_jsxDEV(DashboardStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), alertMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `dashboard-alert alert-${alertMsg.type}`,\n      children: alertMsg.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-column\",\n      children: /*#__PURE__*/_jsxDEV(MapView, {\n        userPosition: userPos,\n        destination: destination,\n        zones: zones,\n        isCreatingZone: isCreatingZone,\n        onMapClick: handleMapClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls-column\",\n      children: isActive ? /*#__PURE__*/_jsxDEV(TripStatusPanel, {\n        tripDetails: tripDetails,\n        onEndTrip: endTrip,\n        contacts: contacts,\n        onSOS: () => setSosCountdown(5),\n        safeCheckSeconds: safeCheckSeconds,\n        handleImSafe: handleImSafe\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(BeforeTripPanel, {\n        contacts: contacts,\n        loading: loading,\n        searchTerm: searchTerm,\n        setSearchTerm: setSearchTerm,\n        onSearch: handleSearch,\n        results: results,\n        onSelectDest: handleSelectDest,\n        dest: destination,\n        onStart: startTrip,\n        searchError: searchError,\n        setSafeCheckInterval: setSafeCheckInterval,\n        safetyScore: safetyScore,\n        isCreatingZone: isCreatingZone,\n        toggleZoneMode: () => setIsCreatingZone(!isCreatingZone)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), sosCountdown !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sos-countdown-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontSize: '3rem'\n        },\n        children: \"SOS IN...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"countdown-number\",\n        children: sosCountdown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-cancel-sos\",\n        onClick: () => setSosCountdown(null),\n        children: \"CANCEL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n};\n_s2(Dashboard, \"J845myEid73CS14OPT1ud0VCwko=\", false, function () {\n  return [useNavigate];\n});\n_c4 = Dashboard;\nexport default Dashboard;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"DashboardStyles\");\n$RefreshReg$(_c2, \"TripStatusPanel\");\n$RefreshReg$(_c3, \"BeforeTripPanel\");\n$RefreshReg$(_c4, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","axios","io","MapView","jsxDEV","_jsxDEV","API_URL","DashboardStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","TripStatusPanel","tripDetails","onEndTrip","contacts","onSOS","safeCheckSeconds","handleImSafe","_s","time","setTime","showModal","setShowModal","startedAt","start","Date","i","setInterval","Math","floor","clearInterval","format","s","toISOString","substr","handleWhatsAppShare","contact","link","window","location","origin","_id","msg","phone","replace","open","encodeURIComponent","className","style","fontWeight","color","String","padStart","onClick","border","background","fontSize","map","c","name","_c2","BeforeTripPanel","loading","searchTerm","setSearchTerm","onSearch","results","onSelectDest","dest","onStart","searchError","setSafeCheckInterval","safetyScore","isCreatingZone","toggleZoneMode","type","placeholder","value","onChange","e","target","length","slice","r","lat","lon","display_name","place_id","margin","width","padding","borderRadius","disabled","flexGrow","marginTop","overflowY","to","charAt","_c3","Dashboard","_s2","isActive","setIsActive","setContacts","setLoading","setResults","destination","setDestination","setTripDetails","userPos","setUserPos","lng","setSearchError","safeCheckInterval","setSafeCheckSeconds","sosCountdown","setSosCountdown","setSafetyScore","zones","setZones","setIsCreatingZone","alertMsg","setAlertMsg","enteredZones","Set","startPosRef","socketRef","watchIdRef","navigate","current","token","localStorage","getItem","fetchData","cRes","zRes","Promise","all","get","headers","data","console","error","navigator","geolocation","watchPosition","p","coords","latitude","longitude","checkZones","checkRouteDeviation","emit","tripId","coordinates","enableHighAccuracy","disconnect","clearWatch","currentZones","getDist","lat1","lon1","lat2","lon2","R","Ï†1","PI","Ï†2","Î”Ï†","Î”Î»","a","sin","cos","atan2","sqrt","forEach","zone","dist","isInside","radius","hour","getHours","activeStartHour","end","activeEndHour","isActiveTime","has","add","text","message","setTimeout","delete","numer","abs","denom","pow","distDegrees","distMeters","handleMapClick","latlng","_prompt","prompt","toLowerCase","res","post","alert","calculateSafetyScore","destLat","destLon","nearby","inc","max","handleSearch","handleSelectDest","d","parseFloat","startTrip","parseInt","t","endTrip","userPosition","onMapClick","_c4","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/shesafe/client/src/Pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\nimport MapView from '../components/MapView';\r\n\r\n// --- CONFIG: FIXED TO LOCALHOST ---\r\nconst API_URL = 'http://localhost:5000'; \r\n\r\n// --- STYLES ---\r\nconst DashboardStyles = () => (\r\n  <style>{`\r\n    .dashboard-layout { display: flex; height: calc(100vh - 70px); background-color: #f8f9fa; position: relative; font-family: 'Segoe UI', sans-serif; }\r\n    .map-column { flex: 3; background-color: #e9ecef; position: relative; }\r\n    .controls-column { flex: 2; background-color: #f8f9fa; padding: 2rem; display: flex; flex-direction: column; overflow-y: auto; gap: 1.5rem; }\r\n    .dashboard-card { background: #ffffff; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); border: 1px solid #f1f3f5; display: flex; flex-direction: column; }\r\n    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #f8f9fa; }\r\n    .card-header h3 { margin: 0; font-size: 1.25rem; color: #212529; font-weight: 700; }\r\n    .manage-link { text-decoration: none; color: #007bff; font-weight: 600; font-size: 0.9rem; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.2s; }\r\n    .manage-link:hover { background-color: #e7f5ff; }\r\n    .destination-form label { font-weight: 600; color: #495057; display: block; margin-bottom: 0.5rem; font-size: 0.9rem; }\r\n    .search-input-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; }\r\n    .search-input-group input { flex-grow: 1; padding: 12px; border: 1px solid #dee2e6; border-radius: 8px; font-size: 1rem; transition: border-color 0.2s; }\r\n    .search-input-group button { background: linear-gradient(135deg, #6f42c1, #512da8); color: white; border: none; border-radius: 8px; padding: 0 1.2rem; cursor: pointer; font-weight: 600; }\r\n    .results-section { margin-bottom: 1rem; max-height: 180px; overflow-y: auto; border: 1px solid #e9ecef; border-radius: 8px; }\r\n    .results-list { list-style: none; padding: 0; margin: 0; }\r\n    .results-list li { padding: 10px 15px; border-bottom: 1px solid #f1f3f5; cursor: pointer; font-size: 0.9rem; color: #495057; transition: background 0.2s; }\r\n    .results-list li:hover { background-color: #f8f9fa; color: #b8369a; }\r\n    .contact-list { display: flex; flex-direction: column; gap: 0.5rem; }\r\n    .contact-item { display: flex; align-items: center; padding: 10px; border-radius: 8px; border: 1px solid transparent; transition: background 0.2s; }\r\n    .contact-item:hover { background-color: #f8f9fa; border-color: #e9ecef; }\r\n    .contact-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%); color: white; display: grid; place-items: center; font-weight: bold; margin-right: 12px; font-size: 1.1rem; }\r\n    .contact-details strong { display: block; color: #343a40; font-size: 0.95rem; }\r\n    .contact-details span { color: #868e96; font-size: 0.85rem; }\r\n    .start-trip-button { width: 100%; padding: 14px; margin-top: 10px; background: linear-gradient(135deg, #b8369a 0%, #6a11cb 100%); color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 1.1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(184, 54, 154, 0.3); transition: transform 0.1s; }\r\n    .status-title { color: #28a745; font-size: 1.6rem; margin-bottom: 1rem; font-weight: 800; text-align: center; }\r\n    .timer-display { text-align: center; margin: 1.5rem 0; }\r\n    .timer-display p { margin: 0; color: #adb5bd; font-size: 0.85rem; letter-spacing: 1px; font-weight: 700; }\r\n    .timer-display span { font-size: 3.5rem; font-weight: 800; color: #212529; font-variant-numeric: tabular-nums; }\r\n    .trip-actions { display: flex; gap: 1rem; margin-top: 1rem; }\r\n    .share-button { flex: 1; padding: 12px; background: #e7f5ff; color: #007bff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: background 0.2s; }\r\n    .end-trip-button { flex: 1; padding: 12px; background: #ffe3e3; color: #e03131; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: background 0.2s; }\r\n    .sos-btn-floating { position: absolute; bottom: 30px; right: 30px; width: 80px; height: 80px; background: radial-gradient(circle, #ff4d4d 0%, #b30000 100%); border: 4px solid white; border-radius: 50%; color: white; font-weight: 800; font-size: 1.3rem; box-shadow: 0 8px 20px rgba(220, 38, 38, 0.4); cursor: pointer; z-index: 1000; animation: pulse 2s infinite; transition: transform 0.2s; }\r\n    .safe-check-box { background: #fff3cd; border: 2px solid #ffeeba; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center; }\r\n    .safe-timer { font-size: 1.8rem; font-weight: 800; color: #856404; display: block; margin: 5px 0; }\r\n    .btn-im-safe { background: #28a745; color: white; border: none; padding: 8px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2); }\r\n    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(4px); }\r\n    .modal-content { background: white; width: 90%; max-width: 420px; padding: 2rem; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.2); }\r\n    .modal-header { display: flex; justify-content: space-between; margin-bottom: 1.5rem; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 1rem; }\r\n    .share-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f1f3f5; }\r\n    .wa-btn { background: #25D366; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.9rem; text-decoration: none; display: flex; align-items: center; gap: 6px; }\r\n    .sos-countdown-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(220, 38, 38, 0.95); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; }\r\n    .countdown-number { font-size: 10rem; font-weight: 800; margin: 20px 0; }\r\n    .btn-cancel-sos { background: white; color: #dc2626; padding: 15px 40px; font-size: 1.5rem; font-weight: bold; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }\r\n    .search-error { color: #dc3545; font-size: 0.9rem; margin-top: 5px; }\r\n\r\n    /* YOUR SAFETY SCORE STYLES */\r\n    .safety-card { padding: 1rem; border-radius: 10px; margin-bottom: 1rem; text-align: center; border: 1px solid transparent; }\r\n    .safety-score-high { background: #d1fae5; border-color: #10b981; color: #065f46; } \r\n    .safety-score-med { background: #fef3c7; border-color: #f59e0b; color: #92400e; }\r\n    .safety-score-low { background: #fee2e2; border-color: #ef4444; color: #991b1b; }\r\n    .score-value { font-size: 2.2rem; font-weight: 800; display: block; margin: 5px 0; }\r\n    .score-label { font-size: 0.8rem; text-transform: uppercase; font-weight: 700; letter-spacing: 1px; opacity: 0.8; }\r\n\r\n    /* NEW ZONE BTN & ALERTS */\r\n    .zone-btn { background: #fff; border: 1px solid #ced4da; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; color: #495057; font-size: 0.8rem; float: right; transition: all 0.2s; }\r\n    .zone-btn.active { background: #e7f5ff; border-color: #007bff; color: #007bff; }\r\n    \r\n    .dashboard-alert { \r\n        position: fixed; top: 20px; left: 50%; transform: translateX(-50%); \r\n        z-index: 3000; padding: 15px 25px; border-radius: 50px; \r\n        font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3);\r\n        color: white; animation: slideDown 0.5s;\r\n    }\r\n    .alert-danger { background: #dc3545; }\r\n    .alert-safe { background: #28a745; }\r\n    @keyframes slideDown { from { top: -50px; } to { top: 20px; } }\r\n  `}</style>\r\n);\r\n\r\nconst TripStatusPanel = ({ tripDetails, onEndTrip, contacts, onSOS, safeCheckSeconds, handleImSafe }) => {\r\n    const [time, setTime] = useState(0);\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(!tripDetails?.startedAt) return;\r\n        const start = new Date(tripDetails.startedAt);\r\n        const i = setInterval(() => setTime(Math.floor((new Date() - start) / 1000)), 1000);\r\n        return () => clearInterval(i);\r\n    }, [tripDetails]);\r\n\r\n    const format = (s) => new Date(s * 1000).toISOString().substr(11, 8);\r\n    const handleWhatsAppShare = (contact) => {\r\n        const link = `${window.location.origin}/track/${tripDetails._id}`;\r\n        const msg = `ðŸš¨ I started a SafeWalk trip! \\n\\nTrack my live location here:\\n${link}`;\r\n        const phone = contact.phone.replace(/[^0-9]/g, ''); \r\n        window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(msg)}`, '_blank');\r\n    };\r\n\r\n    return (\r\n        <div className=\"panel-container\">\r\n            <div className=\"dashboard-card\">\r\n                <h3 className=\"status-title\">Trip in Progress</h3>\r\n                {safeCheckSeconds !== null && (\r\n                    <div className=\"safe-check-box\">\r\n                        <small style={{fontWeight:'bold', color:'#856404'}}>SAFE CHECK IN</small>\r\n                        <span className=\"safe-timer\" style={{color: safeCheckSeconds < 30 ? '#dc3545' : '#856404'}}>\r\n                            {Math.floor(safeCheckSeconds / 60)}:{String(safeCheckSeconds % 60).padStart(2,'0')}\r\n                        </span>\r\n                        <button className=\"btn-im-safe\" onClick={handleImSafe}>I'm Safe</button>\r\n                    </div>\r\n                )}\r\n                <div className=\"timer-display\"><p>ELAPSED TIME</p><span>{format(time)}</span></div>\r\n                <div className=\"trip-actions\">\r\n                    <button className=\"share-button\" onClick={() => setShowModal(true)}>Share Link</button>\r\n                    <button className=\"end-trip-button\" onClick={onEndTrip}>End Trip</button>\r\n                </div>\r\n            </div>\r\n            <button className=\"sos-btn-floating\" onClick={onSOS}>SOS</button>\r\n            {showModal && (\r\n                <div className=\"modal-overlay\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\"><h3>Share with...</h3><button onClick={() => setShowModal(false)} style={{border:'none', background:'none', fontSize:'1.5rem'}}>Ã—</button></div>\r\n                        {contacts.map(c => (\r\n                            <div key={c._id} className=\"share-item\">\r\n                                <div><strong>{c.name}</strong><br/><small>{c.phone}</small></div>\r\n                                <button className=\"wa-btn\" onClick={() => handleWhatsAppShare(c)}>Share on WhatsApp</button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BeforeTripPanel = ({ contacts, loading, searchTerm, setSearchTerm, onSearch, results, onSelectDest, dest, onStart, searchError, setSafeCheckInterval, safetyScore, isCreatingZone, toggleZoneMode }) => (\r\n    <div className=\"panel-container\">\r\n        <div className=\"dashboard-card trip-planning-module\">\r\n          <div className=\"card-header\">\r\n              <h3>Start a New Trip</h3>\r\n              <button className={`zone-btn ${isCreatingZone ? 'active' : ''}`} onClick={toggleZoneMode}>\r\n                  {isCreatingZone ? 'Tap Map to Save' : '+ Add Safe Zone'}\r\n              </button>\r\n          </div>\r\n          <div className=\"destination-form\">\r\n            <label>Where are you going?</label>\r\n            <div className=\"search-input-group\">\r\n              <input type=\"text\" placeholder=\"Search destination...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\r\n              <button onClick={onSearch}>Search</button>\r\n            </div>\r\n            {searchError && <p className=\"search-error\">{searchError}</p>}\r\n            {results.length > 0 && (\r\n              <div className=\"results-section\">\r\n                <ul className=\"results-list\">\r\n                  {results.slice(0, 5).map((r) => (\r\n                    <li key={r.place_id} onClick={() => onSelectDest({lat: r.lat, lon: r.lon, display_name: r.display_name})} style={{background: dest?.place_id === r.place_id ? '#f3e5f5':''}}>{r.display_name}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            \r\n            {/* SAFETY SCORE CARD PRESERVED */}\r\n            {dest && safetyScore !== null && (\r\n                <div className={`safety-card ${safetyScore >= 75 ? 'safety-score-high' : safetyScore >= 40 ? 'safety-score-med' : 'safety-score-low'}`}>\r\n                    <small className=\"score-label\">Route Safety Score</small>\r\n                    <span className=\"score-value\">{safetyScore}/100</span>\r\n                    <p style={{margin:0, fontSize:'0.9rem', fontWeight:600}}>{safetyScore >= 75 ? \"Safe Route âœ…\" : safetyScore >= 40 ? \"Moderate Caution âš ï¸\" : \"High Risk Area â›”\"}</p>\r\n                </div>\r\n            )}\r\n\r\n            <div style={{margin: '15px 0'}}>\r\n                <label>Safe Check Interval:</label>\r\n                <select style={{width:'100%', padding:'12px', borderRadius:'8px', border:'1px solid #ced4da'}} onChange={(e) => setSafeCheckInterval(e.target.value)}>\r\n                    <option value=\"\">Off (Manual SOS only)</option>\r\n                    <option value=\"15\">15 Minutes</option>\r\n                    <option value=\"30\">30 Minutes</option>\r\n                </select>\r\n            </div>\r\n            <button className=\"start-trip-button\" onClick={onStart} disabled={!dest}>Start SafeWalk Trip</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"dashboard-card contacts-module\" style={{flexGrow:1, marginTop:'20px', overflowY:'auto'}}>\r\n          <div className=\"card-header\"><h3>Trusted Contacts</h3><Link to=\"/contacts\" className=\"manage-link\">Manage</Link></div>\r\n          <div className=\"contact-list\">\r\n            {loading && <p>Loading contacts...</p>}\r\n            {contacts.map(c => (\r\n              <div key={c._id} className=\"contact-item\">\r\n                <div className=\"contact-avatar\">{c.name.charAt(0)}</div>\r\n                <div className=\"contact-details\"><strong>{c.name}</strong><span>{c.phone}</span></div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst Dashboard = () => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [contacts, setContacts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [results, setResults] = useState([]);\r\n  const [destination, setDestination] = useState(null);\r\n  const [tripDetails, setTripDetails] = useState(null);\r\n  const [userPos, setUserPos] = useState({ lat: 26.7606, lng: 83.3732 });\r\n  const [searchError, setSearchError] = useState('');\r\n  \r\n  const [safeCheckInterval, setSafeCheckInterval] = useState(null);\r\n  const [safeCheckSeconds, setSafeCheckSeconds] = useState(null);\r\n  const [sosCountdown, setSosCountdown] = useState(null);\r\n  const [safetyScore, setSafetyScore] = useState(null);\r\n\r\n  // --- NEW ZONES STATE ---\r\n  const [zones, setZones] = useState([]);\r\n  const [isCreatingZone, setIsCreatingZone] = useState(false);\r\n  const [alertMsg, setAlertMsg] = useState(null);\r\n  const enteredZones = useRef(new Set()); \r\n  const startPosRef = useRef(null);\r\n\r\n  const socketRef = useRef(null);\r\n  const watchIdRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    socketRef.current = io(API_URL);\r\n    \r\n    const token = localStorage.getItem('token');\r\n    if(!token) { navigate('/login'); return; }\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n             // Parallel Fetch\r\n             const [cRes, zRes] = await Promise.all([\r\n                 axios.get(`${API_URL}/api/contacts`, { headers: { 'x-auth-token': token } }),\r\n                 axios.get(`${API_URL}/api/zones`, { headers: { 'x-auth-token': token } })\r\n             ]);\r\n             setContacts(cRes.data);\r\n             setZones(zRes.data);\r\n        } catch(e) { console.error(e); }\r\n        setLoading(false);\r\n    };\r\n    fetchData();\r\n\r\n    // MAIN GPS LOOP\r\n    watchIdRef.current = navigator.geolocation.watchPosition(\r\n      (p) => {\r\n         const coords = { lat: p.coords.latitude, lng: p.coords.longitude };\r\n         setUserPos(coords);\r\n         \r\n         // 1. Check Zones (Feature 1 & 2)\r\n         checkZones(coords, zones);\r\n\r\n         // 2. Check Route Deviation (Feature 3)\r\n         if(isActive && destination && startPosRef.current) {\r\n             checkRouteDeviation(coords, startPosRef.current, destination);\r\n         }\r\n\r\n         if(tripDetails?._id) {\r\n             socketRef.current.emit('updateLocation', { tripId: tripDetails._id, coordinates: coords });\r\n         }\r\n      },\r\n      (e) => console.error(\"Loc Error\", e),\r\n      { enableHighAccuracy: true }\r\n    );\r\n\r\n    return () => {\r\n      if(socketRef.current) socketRef.current.disconnect();\r\n      if(watchIdRef.current) navigator.geolocation.clearWatch(watchIdRef.current);\r\n    };\r\n  }, [navigate, zones, tripDetails, isActive, destination]);\r\n\r\n  // --- FEATURE 1 & 2: ZONE LOGIC ---\r\n  const checkZones = (coords, currentZones) => {\r\n      const getDist = (lat1, lon1, lat2, lon2) => {\r\n          const R = 6371e3; \r\n          const Ï†1 = lat1 * Math.PI/180, Ï†2 = lat2 * Math.PI/180;\r\n          const Î”Ï† = (lat2-lat1) * Math.PI/180, Î”Î» = (lon2-lon1) * Math.PI/180;\r\n          const a = Math.sin(Î”Ï†/2)*Math.sin(Î”Ï†/2) + Math.cos(Ï†1)*Math.cos(Ï†2) * Math.sin(Î”Î»/2)*Math.sin(Î”Î»/2);\r\n          return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n      };\r\n\r\n      currentZones.forEach(zone => {\r\n          const dist = getDist(coords.lat, coords.lng, zone.location.lat, zone.location.lng);\r\n          const isInside = dist < (zone.radius || 200);\r\n          \r\n          const hour = new Date().getHours();\r\n          const start = zone.activeStartHour || 0;\r\n          const end = zone.activeEndHour || 24;\r\n          const isActiveTime = (start < end) ? (hour >= start && hour < end) : (hour >= start || hour < end);\r\n\r\n          if (isInside && isActiveTime) {\r\n              if (!enteredZones.current.has(zone._id)) {\r\n                  enteredZones.current.add(zone._id);\r\n                  if (zone.type === 'Safe') {\r\n                      setAlertMsg({ text: `ðŸ›¡ï¸ Entered Safe Zone: ${zone.name}`, type: 'safe' });\r\n                      if(tripDetails) socketRef.current.emit('zoneAlert', { tripId: tripDetails._id, message: `Entered Safe Zone: ${zone.name}` });\r\n                  } else {\r\n                      setAlertMsg({ text: `âš ï¸ WARNING: Unsafe Area (${zone.name})`, type: 'danger' });\r\n                      setTimeout(() => {\r\n                          if (enteredZones.current.has(zone._id)) setSafeCheckSeconds(30); \r\n                      }, 600000); \r\n                  }\r\n                  setTimeout(() => setAlertMsg(null), 5000);\r\n              }\r\n          } else {\r\n              if (enteredZones.current.has(zone._id)) {\r\n                  enteredZones.current.delete(zone._id);\r\n                  if (zone.type === 'Safe') {\r\n                      setAlertMsg({ text: `Left Safe Zone: ${zone.name}`, type: 'danger' });\r\n                      if(tripDetails) socketRef.current.emit('zoneAlert', { tripId: tripDetails._id, message: `Left Safe Zone: ${zone.name}` });\r\n                      setTimeout(() => setAlertMsg(null), 5000);\r\n                  }\r\n              }\r\n          }\r\n      });\r\n  };\r\n\r\n  // --- FEATURE 3: ROUTE DEVIATION ---\r\n  const checkRouteDeviation = (current, start, end) => {\r\n      const numer = Math.abs((end.lat - start.lat)*(start.lng - current.lng) - (start.lat - current.lat)*(end.lon - start.lng));\r\n      const denom = Math.sqrt(Math.pow(end.lat - start.lat, 2) + Math.pow(end.lon - start.lng, 2));\r\n      const distDegrees = numer / denom;\r\n      const distMeters = distDegrees * 111000;\r\n\r\n      if(distMeters > 500) {\r\n          setAlertMsg({ text: \"âš ï¸ OFF ROUTE DETECTED!\", type: 'danger' });\r\n          setTimeout(() => setAlertMsg(null), 5000);\r\n      }\r\n  };\r\n\r\n  const handleMapClick = async (latlng) => {\r\n      if(!isCreatingZone) return;\r\n      const name = prompt(\"Zone Name:\");\r\n      if(!name) return;\r\n      const type = prompt(\"Type 'S' for Safe, 'D' for Danger:\")?.toLowerCase() === 'd' ? 'Danger' : 'Safe';\r\n      \r\n      const token = localStorage.getItem('token');\r\n      try {\r\n          const res = await axios.post(`${API_URL}/api/zones`, { \r\n              name, type, lat: latlng.lat, lng: latlng.lng \r\n          }, { headers: { 'x-auth-token': token } });\r\n          setZones([...zones, res.data]);\r\n          setIsCreatingZone(false);\r\n          alert(\"Zone Added\");\r\n      } catch(e) { alert(\"Error adding zone\"); }\r\n  };\r\n\r\n  const calculateSafetyScore = async (destLat, destLon) => {\r\n      try {\r\n          const res = await axios.get(`${API_URL}/api/incidents`);\r\n          let nearby = 0;\r\n          res.data.forEach(inc => {\r\n               if(Math.abs(inc.location.lat - destLat) < 0.02 && Math.abs(inc.location.lng - destLon) < 0.02) nearby++;\r\n          });\r\n          setSafetyScore(Math.max(30, 100 - (nearby * 15)));\r\n      } catch(e) { setSafetyScore(null); }\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    try { const res = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${searchTerm}`); setResults(res.data); } catch(e){}\r\n  };\r\n\r\n  const handleSelectDest = (d) => {\r\n      setDestination(d);\r\n      calculateSafetyScore(parseFloat(d.lat), parseFloat(d.lon));\r\n  };\r\n\r\n  const startTrip = async () => {\r\n    if(!destination) return alert(\"Select Destination\");\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n        const res = await axios.post(`${API_URL}/api/trips/start`, { destination: { name: destination.display_name, lat: destination.lat, lon: destination.lon } }, { headers: { 'x-auth-token': token } });\r\n        setTripDetails(res.data);\r\n        setIsActive(true);\r\n        startPosRef.current = userPos; // Mark start\r\n        if (safeCheckInterval) setSafeCheckSeconds(parseInt(safeCheckInterval) * 60);\r\n        socketRef.current.emit('joinTripRoom', res.data._id);\r\n    } catch(e) { alert(\"Error starting trip.\"); }\r\n  };\r\n\r\n  // --- SOS COUNTDOWN (PRESERVED) ---\r\n  useEffect(() => {\r\n      if (isActive && safeCheckSeconds !== null && sosCountdown === null) {\r\n          const t = setInterval(() => setSafeCheckSeconds(p => {\r\n              if (p <= 1) { setSosCountdown(5); return parseInt(safeCheckInterval) * 60; }\r\n              return p - 1;\r\n          }), 1000);\r\n          return () => clearInterval(t);\r\n      }\r\n  }, [isActive, safeCheckSeconds, sosCountdown]);\r\n\r\n  useEffect(() => {\r\n      if (sosCountdown !== null) {\r\n          if (sosCountdown > 0) setTimeout(() => setSosCountdown(sosCountdown - 1), 1000);\r\n          else { \r\n             if(tripDetails) {\r\n                 socketRef.current.emit('sosTriggered', tripDetails._id);\r\n                 alert(\"SOS SENT!\");\r\n             }\r\n             setSosCountdown(null);\r\n          }\r\n      }\r\n  }, [sosCountdown]);\r\n\r\n  const handleImSafe = async () => {\r\n      if (safeCheckInterval) setSafeCheckSeconds(parseFloat(safeCheckInterval) * 60);\r\n      socketRef.current.emit('sosCancelled', tripDetails._id);\r\n      alert(\"Marked Safe.\");\r\n  };\r\n\r\n  const endTrip = async () => {\r\n    socketRef.current.emit('endTrip', tripDetails._id);\r\n    const token = localStorage.getItem('token');\r\n    try { await axios.post(`${API_URL}/api/trips/${tripDetails._id}/end`, {}, { headers: { 'x-auth-token': token } }); } catch(e) {}\r\n    setIsActive(false); setTripDetails(null); setDestination(null); setSearchTerm(''); setResults([]); setSafetyScore(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-layout\">\r\n      <DashboardStyles />\r\n      {/* FLOATING ALERT (FEATURE 1 & 3) */}\r\n      {alertMsg && <div className={`dashboard-alert alert-${alertMsg.type}`}>{alertMsg.text}</div>}\r\n      \r\n      <div className=\"map-column\">\r\n          <MapView \r\n              userPosition={userPos} \r\n              destination={destination}\r\n              zones={zones}\r\n              isCreatingZone={isCreatingZone}\r\n              onMapClick={handleMapClick}\r\n          />\r\n      </div>\r\n      <div className=\"controls-column\">\r\n        {isActive ? (\r\n          <TripStatusPanel \r\n             tripDetails={tripDetails} onEndTrip={endTrip} contacts={contacts} \r\n             onSOS={() => setSosCountdown(5)} safeCheckSeconds={safeCheckSeconds} handleImSafe={handleImSafe}\r\n          />\r\n        ) : (\r\n          <BeforeTripPanel\r\n            contacts={contacts} loading={loading} searchTerm={searchTerm} setSearchTerm={setSearchTerm}\r\n            onSearch={handleSearch} results={results} onSelectDest={handleSelectDest} dest={destination}\r\n            onStart={startTrip} searchError={searchError} setSafeCheckInterval={setSafeCheckInterval}\r\n            safetyScore={safetyScore}\r\n            isCreatingZone={isCreatingZone} toggleZoneMode={() => setIsCreatingZone(!isCreatingZone)}\r\n          />\r\n        )}\r\n      </div>\r\n      {sosCountdown !== null && (\r\n          <div className=\"sos-countdown-overlay\">\r\n              <h1 style={{fontSize:'3rem'}}>SOS IN...</h1>\r\n              <div className=\"countdown-number\">{sosCountdown}</div>\r\n              <button className=\"btn-cancel-sos\" onClick={() => setSosCountdown(null)}>CANCEL</button>\r\n          </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}