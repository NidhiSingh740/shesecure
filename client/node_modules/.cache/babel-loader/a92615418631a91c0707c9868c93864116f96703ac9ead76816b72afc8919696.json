{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\womensafe\\\\client\\\\src\\\\Pages\\\\TrackTripPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://172.18.24.116:5000'; // Ensure this matches your IP\n\n// --- STYLES ---\nconst TrackStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    .track-container { height: 100vh; display: flex; flex-direction: column; font-family: 'Segoe UI', sans-serif; }\n    .track-header { padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; transition: background 0.3s; }\n    .status-active { background: white; color: #333; }\n    .status-sos { background: #dc3545; color: white; animation: pulse-red 1s infinite; }\n    .status-completed { background: #28a745; color: white; }\n    \n    .status-text { margin: 0; font-size: 1.8rem; font-weight: 800; text-transform: uppercase; }\n    .user-name { margin: 5px 0 0; font-size: 1rem; opacity: 0.9; }\n    \n    .map-area { flex: 1; width: 100%; }\n    \n    /* POPUP ALERT STYLE */\n    .zone-alert-popup {\n        position: fixed;\n        top: 20%;\n        left: 50%;\n        transform: translateX(-50%);\n        background: white;\n        padding: 20px 30px;\n        border-radius: 12px;\n        box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n        z-index: 2000;\n        text-align: center;\n        border-left: 8px solid #28a745; /* Default Green */\n        animation: slideDown 0.5s ease-out;\n        width: 80%;\n        max-width: 400px;\n    }\n    .zone-alert-danger { border-left-color: #dc3545; }\n    .zone-alert-msg { font-size: 1.2rem; font-weight: bold; color: #333; margin-bottom: 10px; display: block; }\n    .btn-close-alert { background: #eee; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; }\n\n    @keyframes pulse-red { 0% { background: #dc3545; } 50% { background: #b02a37; } 100% { background: #dc3545; } }\n    @keyframes slideDown { from { top: -100px; opacity: 0; } to { top: 20%; opacity: 1; } }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 10,\n  columnNumber: 3\n}, this);\n_c = TrackStyles;\nconst loadLeaflet = cb => {\n  if (window.L) return cb();\n  const s = document.createElement('script');\n  s.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n  s.onload = cb;\n  document.head.appendChild(s);\n  const c = document.createElement('link');\n  c.rel = 'stylesheet';\n  c.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n  document.head.appendChild(c);\n};\nconst TrackTripPage = () => {\n  _s();\n  var _trip$userId;\n  const {\n    tripId\n  } = useParams();\n  const [trip, setTrip] = useState(null);\n  const [livePos, setLivePos] = useState(null);\n  const [status, setStatus] = useState(\"active\");\n  const [zoneNotification, setZoneNotification] = useState(null); // NEW: Holds \"Arrived at Home\" message\n\n  const mapRef = useRef(null);\n  const mapObj = useRef(null);\n  const marker = useRef(null);\n  useEffect(() => {\n    // 1. Fetch Trip Data\n    axios.get(`${API_URL}/api/trips/${tripId}`).then(res => {\n      var _res$data$path;\n      setTrip(res.data);\n      if (res.data.status) setStatus(res.data.status);\n      if (((_res$data$path = res.data.path) === null || _res$data$path === void 0 ? void 0 : _res$data$path.length) > 0) setLivePos(res.data.path[res.data.path.length - 1]);\n    }).catch(err => alert(\"Trip not found or link expired.\"));\n\n    // 2. Connect Socket\n    const socket = io(API_URL);\n    socket.emit('joinTripRoom', tripId);\n\n    // Listeners\n    socket.on('tripUpdate', coords => setLivePos(coords));\n    socket.on('tripEnded', () => {\n      setStatus('completed');\n      alert(\"Trip has ended safely.\");\n    });\n    socket.on('sosAlert', () => {\n      setStatus('sos');\n      try {\n        new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play().catch(() => {});\n      } catch (e) {}\n    });\n    socket.on('sosClear', () => setStatus('active'));\n\n    // --- NEW: LISTEN FOR ZONE ALERTS ---\n    socket.on('receiveZoneAlert', ({\n      message,\n      type\n    }) => {\n      // Play a sound for attention\n      try {\n        new Audio('https://actions.google.com/sounds/v1/science_fiction/scifi_laser.ogg').play().catch(() => {});\n      } catch (e) {}\n\n      // Show Popup\n      setZoneNotification({\n        message,\n        type\n      });\n\n      // Auto-hide after 10 seconds\n      setTimeout(() => setZoneNotification(null), 10000);\n    });\n\n    // 3. Init Map\n    loadLeaflet(() => {\n      if (mapRef.current && !mapObj.current) {\n        const L = window.L;\n        mapObj.current = L.map(mapRef.current).setView([26.76, 83.37], 13);\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapObj.current);\n        const blueIcon = new L.Icon({\n          iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n          shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n          iconSize: [25, 41],\n          iconAnchor: [12, 41]\n        });\n        marker.current = L.marker([26.76, 83.37], {\n          icon: blueIcon\n        }).addTo(mapObj.current);\n      }\n    });\n    return () => socket.disconnect();\n  }, [tripId]);\n\n  // Update Map Marker\n  useEffect(() => {\n    if (livePos && mapObj.current && window.L && marker.current) {\n      const L = window.L;\n      const lat = parseFloat(livePos.lat);\n      const lng = parseFloat(livePos.lng);\n      if (!isNaN(lat)) {\n        marker.current.setLatLng([lat, lng]);\n        mapObj.current.setView([lat, lng]);\n\n        // Update Icon based on Status\n        if (status === 'sos') {\n          const redIcon = new L.Icon({\n            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',\n            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n            iconSize: [25, 41],\n            iconAnchor: [12, 41]\n          });\n          marker.current.setIcon(redIcon);\n        } else {\n          const blueIcon = new L.Icon({\n            iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n            iconSize: [25, 41],\n            iconAnchor: [12, 41]\n          });\n          marker.current.setIcon(blueIcon);\n        }\n      }\n    }\n  }, [livePos, status]);\n\n  // --- RENDER ---\n  let headerClass = 'status-active';\n  let statusText = 'LIVE TRACKING';\n  if (status === 'sos') {\n    headerClass = 'status-sos';\n    statusText = '⚠️ SOS HELP NEEDED ⚠️';\n  } else if (status === 'completed') {\n    headerClass = 'status-completed';\n    statusText = 'TRIP ENDED';\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"track-container\",\n    children: [/*#__PURE__*/_jsxDEV(TrackStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `track-header ${headerClass}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"status-text\",\n        children: statusText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"user-name\",\n        children: [\"Tracking: \", (trip === null || trip === void 0 ? void 0 : (_trip$userId = trip.userId) === null || _trip$userId === void 0 ? void 0 : _trip$userId.fullName) || 'User']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 12\n      }, this), livePos && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `https://www.google.com/maps/dir/?api=1&destination=${livePos.lat},${livePos.lng}`,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        style: {\n          display: 'inline-block',\n          marginTop: '10px',\n          background: 'rgba(0,0,0,0.2)',\n          color: 'white',\n          padding: '5px 15px',\n          borderRadius: '20px',\n          textDecoration: 'none',\n          fontSize: '0.9rem'\n        },\n        children: \"\\u2197 Open in Google Maps\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map-area\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 8\n    }, this), zoneNotification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `zone-alert-popup ${zoneNotification.type === 'Danger' ? 'zone-alert-danger' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"zone-alert-msg\",\n        children: [zoneNotification.type === 'Safe' ? '✅' : '⚠️', \" \", zoneNotification.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-close-alert\",\n        onClick: () => setZoneNotification(null),\n        children: \"OK\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n};\n_s(TrackTripPage, \"oFRkHBSluYKswRoCZKG3wTdtipI=\", false, function () {\n  return [useParams];\n});\n_c2 = TrackTripPage;\nexport default TrackTripPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"TrackStyles\");\n$RefreshReg$(_c2, \"TrackTripPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","axios","io","jsxDEV","_jsxDEV","API_URL","TrackStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","loadLeaflet","cb","window","L","s","document","createElement","src","onload","head","appendChild","c","rel","href","TrackTripPage","_s","_trip$userId","tripId","trip","setTrip","livePos","setLivePos","status","setStatus","zoneNotification","setZoneNotification","mapRef","mapObj","marker","get","then","res","_res$data$path","data","path","length","catch","err","alert","socket","emit","on","coords","Audio","play","e","message","type","setTimeout","current","map","setView","tileLayer","addTo","blueIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","icon","disconnect","lat","parseFloat","lng","isNaN","setLatLng","redIcon","setIcon","headerClass","statusText","className","userId","fullName","target","style","display","marginTop","background","color","padding","borderRadius","textDecoration","fontSize","ref","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/womensafe/client/src/Pages/TrackTripPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst API_URL = 'http://172.18.24.116:5000'; // Ensure this matches your IP\r\n\r\n// --- STYLES ---\r\nconst TrackStyles = () => (\r\n  <style>{`\r\n    .track-container { height: 100vh; display: flex; flex-direction: column; font-family: 'Segoe UI', sans-serif; }\r\n    .track-header { padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; transition: background 0.3s; }\r\n    .status-active { background: white; color: #333; }\r\n    .status-sos { background: #dc3545; color: white; animation: pulse-red 1s infinite; }\r\n    .status-completed { background: #28a745; color: white; }\r\n    \r\n    .status-text { margin: 0; font-size: 1.8rem; font-weight: 800; text-transform: uppercase; }\r\n    .user-name { margin: 5px 0 0; font-size: 1rem; opacity: 0.9; }\r\n    \r\n    .map-area { flex: 1; width: 100%; }\r\n    \r\n    /* POPUP ALERT STYLE */\r\n    .zone-alert-popup {\r\n        position: fixed;\r\n        top: 20%;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        background: white;\r\n        padding: 20px 30px;\r\n        border-radius: 12px;\r\n        box-shadow: 0 10px 40px rgba(0,0,0,0.3);\r\n        z-index: 2000;\r\n        text-align: center;\r\n        border-left: 8px solid #28a745; /* Default Green */\r\n        animation: slideDown 0.5s ease-out;\r\n        width: 80%;\r\n        max-width: 400px;\r\n    }\r\n    .zone-alert-danger { border-left-color: #dc3545; }\r\n    .zone-alert-msg { font-size: 1.2rem; font-weight: bold; color: #333; margin-bottom: 10px; display: block; }\r\n    .btn-close-alert { background: #eee; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; }\r\n\r\n    @keyframes pulse-red { 0% { background: #dc3545; } 50% { background: #b02a37; } 100% { background: #dc3545; } }\r\n    @keyframes slideDown { from { top: -100px; opacity: 0; } to { top: 20%; opacity: 1; } }\r\n  `}</style>\r\n);\r\n\r\nconst loadLeaflet = (cb) => {\r\n    if (window.L) return cb();\r\n    const s = document.createElement('script'); s.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'; s.onload = cb; document.head.appendChild(s);\r\n    const c = document.createElement('link'); c.rel = 'stylesheet'; c.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'; document.head.appendChild(c);\r\n};\r\n\r\nconst TrackTripPage = () => {\r\n  const { tripId } = useParams();\r\n  const [trip, setTrip] = useState(null);\r\n  const [livePos, setLivePos] = useState(null);\r\n  const [status, setStatus] = useState(\"active\"); \r\n  const [zoneNotification, setZoneNotification] = useState(null); // NEW: Holds \"Arrived at Home\" message\r\n\r\n  const mapRef = useRef(null);\r\n  const mapObj = useRef(null);\r\n  const marker = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // 1. Fetch Trip Data\r\n    axios.get(`${API_URL}/api/trips/${tripId}`)\r\n         .then(res => {\r\n            setTrip(res.data);\r\n            if(res.data.status) setStatus(res.data.status);\r\n            if(res.data.path?.length > 0) setLivePos(res.data.path[res.data.path.length-1]);\r\n         })\r\n         .catch(err => alert(\"Trip not found or link expired.\"));\r\n\r\n    // 2. Connect Socket\r\n    const socket = io(API_URL);\r\n    socket.emit('joinTripRoom', tripId);\r\n    \r\n    // Listeners\r\n    socket.on('tripUpdate', (coords) => setLivePos(coords));\r\n    \r\n    socket.on('tripEnded', () => { \r\n        setStatus('completed'); \r\n        alert(\"Trip has ended safely.\"); \r\n    });\r\n    \r\n    socket.on('sosAlert', () => {\r\n        setStatus('sos');\r\n        try { new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play().catch(()=>{}); } catch(e){}\r\n    });\r\n    \r\n    socket.on('sosClear', () => setStatus('active'));\r\n\r\n    // --- NEW: LISTEN FOR ZONE ALERTS ---\r\n    socket.on('receiveZoneAlert', ({ message, type }) => {\r\n        // Play a sound for attention\r\n        try { new Audio('https://actions.google.com/sounds/v1/science_fiction/scifi_laser.ogg').play().catch(()=>{}); } catch(e){}\r\n        \r\n        // Show Popup\r\n        setZoneNotification({ message, type });\r\n        \r\n        // Auto-hide after 10 seconds\r\n        setTimeout(() => setZoneNotification(null), 10000);\r\n    });\r\n\r\n    // 3. Init Map\r\n    loadLeaflet(() => {\r\n        if(mapRef.current && !mapObj.current) {\r\n            const L = window.L;\r\n            mapObj.current = L.map(mapRef.current).setView([26.76, 83.37], 13);\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapObj.current);\r\n            \r\n            const blueIcon = new L.Icon({\r\n                iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n                iconSize: [25, 41], iconAnchor: [12, 41]\r\n            });\r\n            marker.current = L.marker([26.76, 83.37], {icon: blueIcon}).addTo(mapObj.current);\r\n        }\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, [tripId]);\r\n\r\n  // Update Map Marker\r\n  useEffect(() => {\r\n      if(livePos && mapObj.current && window.L && marker.current) {\r\n          const L = window.L;\r\n          const lat = parseFloat(livePos.lat);\r\n          const lng = parseFloat(livePos.lng);\r\n          \r\n          if(!isNaN(lat)) {\r\n             marker.current.setLatLng([lat, lng]);\r\n             mapObj.current.setView([lat, lng]);\r\n             \r\n             // Update Icon based on Status\r\n             if (status === 'sos') {\r\n                 const redIcon = new L.Icon({\r\n                     iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',\r\n                     shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n                     iconSize: [25, 41], iconAnchor: [12, 41]\r\n                 });\r\n                 marker.current.setIcon(redIcon);\r\n             } else {\r\n                 const blueIcon = new L.Icon({\r\n                     iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n                     shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n                     iconSize: [25, 41], iconAnchor: [12, 41]\r\n                 });\r\n                 marker.current.setIcon(blueIcon);\r\n             }\r\n          }\r\n      }\r\n  }, [livePos, status]);\r\n\r\n  // --- RENDER ---\r\n  let headerClass = 'status-active';\r\n  let statusText = 'LIVE TRACKING';\r\n  if (status === 'sos') { headerClass = 'status-sos'; statusText = '⚠️ SOS HELP NEEDED ⚠️'; }\r\n  else if (status === 'completed') { headerClass = 'status-completed'; statusText = 'TRIP ENDED'; }\r\n\r\n  return (\r\n    <div className=\"track-container\">\r\n       <TrackStyles />\r\n       \r\n       <div className={`track-header ${headerClass}`}>\r\n           <h1 className=\"status-text\">{statusText}</h1>\r\n           <p className=\"user-name\">Tracking: {trip?.userId?.fullName || 'User'}</p>\r\n           \r\n           {/* Navigation Link */}\r\n           {livePos && (\r\n             <a href={`https://www.google.com/maps/dir/?api=1&destination=${livePos.lat},${livePos.lng}`} \r\n                target=\"_blank\" \r\n                rel=\"noreferrer\"\r\n                style={{display:'inline-block', marginTop:'10px', background:'rgba(0,0,0,0.2)', color:'white', padding:'5px 15px', borderRadius:'20px', textDecoration:'none', fontSize:'0.9rem'}}>\r\n                ↗ Open in Google Maps\r\n             </a>\r\n           )}\r\n       </div>\r\n       \r\n       <div ref={mapRef} className=\"map-area\"></div>\r\n\r\n       {/* NEW: ZONE NOTIFICATION POPUP */}\r\n       {zoneNotification && (\r\n           <div className={`zone-alert-popup ${zoneNotification.type === 'Danger' ? 'zone-alert-danger' : ''}`}>\r\n               <span className=\"zone-alert-msg\">\r\n                   {zoneNotification.type === 'Safe' ? '✅' : '⚠️'} {zoneNotification.message}\r\n               </span>\r\n               <button className=\"btn-close-alert\" onClick={() => setZoneNotification(null)}>OK</button>\r\n           </div>\r\n       )}\r\n    </div>\r\n  );\r\n};\r\nexport default TrackTripPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,OAAO,GAAG,2BAA2B,CAAC,CAAC;;AAE7C;AACA,MAAMC,WAAW,GAAGA,CAAA,kBAClBF,OAAA;EAAAG,QAAA,EAAQ;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAG;EAAAC,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OAAQ,CACV;AAACC,EAAA,GArCIN,WAAW;AAuCjB,MAAMO,WAAW,GAAIC,EAAE,IAAK;EACxB,IAAIC,MAAM,CAACC,CAAC,EAAE,OAAOF,EAAE,CAAC,CAAC;EACzB,MAAMG,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAAEF,CAAC,CAACG,GAAG,GAAG,iDAAiD;EAAEH,CAAC,CAACI,MAAM,GAAGP,EAAE;EAAEI,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,CAAC,CAAC;EAClJ,MAAMO,CAAC,GAAGN,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EAAEK,CAAC,CAACC,GAAG,GAAG,YAAY;EAAED,CAAC,CAACE,IAAI,GAAG,kDAAkD;EAAER,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACC,CAAC,CAAC;AAC7J,CAAC;AAED,MAAMG,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,YAAA;EAC1B,MAAM;IAAEC;EAAO,CAAC,GAAG9B,SAAS,CAAC,CAAC;EAC9B,MAAM,CAAC+B,IAAI,EAAEC,OAAO,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACoC,OAAO,EAAEC,UAAU,CAAC,GAAGrC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACsC,MAAM,EAAEC,SAAS,CAAC,GAAGvC,QAAQ,CAAC,QAAQ,CAAC;EAC9C,MAAM,CAACwC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAEhE,MAAM0C,MAAM,GAAGxC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMyC,MAAM,GAAGzC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM0C,MAAM,GAAG1C,MAAM,CAAC,IAAI,CAAC;EAE3BD,SAAS,CAAC,MAAM;IACd;IACAG,KAAK,CAACyC,GAAG,CAAC,GAAGrC,OAAO,cAAcyB,MAAM,EAAE,CAAC,CACrCa,IAAI,CAACC,GAAG,IAAI;MAAA,IAAAC,cAAA;MACVb,OAAO,CAACY,GAAG,CAACE,IAAI,CAAC;MACjB,IAAGF,GAAG,CAACE,IAAI,CAACX,MAAM,EAAEC,SAAS,CAACQ,GAAG,CAACE,IAAI,CAACX,MAAM,CAAC;MAC9C,IAAG,EAAAU,cAAA,GAAAD,GAAG,CAACE,IAAI,CAACC,IAAI,cAAAF,cAAA,uBAAbA,cAAA,CAAeG,MAAM,IAAG,CAAC,EAAEd,UAAU,CAACU,GAAG,CAACE,IAAI,CAACC,IAAI,CAACH,GAAG,CAACE,IAAI,CAACC,IAAI,CAACC,MAAM,GAAC,CAAC,CAAC,CAAC;IAClF,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAIC,KAAK,CAAC,iCAAiC,CAAC,CAAC;;IAE5D;IACA,MAAMC,MAAM,GAAGlD,EAAE,CAACG,OAAO,CAAC;IAC1B+C,MAAM,CAACC,IAAI,CAAC,cAAc,EAAEvB,MAAM,CAAC;;IAEnC;IACAsB,MAAM,CAACE,EAAE,CAAC,YAAY,EAAGC,MAAM,IAAKrB,UAAU,CAACqB,MAAM,CAAC,CAAC;IAEvDH,MAAM,CAACE,EAAE,CAAC,WAAW,EAAE,MAAM;MACzBlB,SAAS,CAAC,WAAW,CAAC;MACtBe,KAAK,CAAC,wBAAwB,CAAC;IACnC,CAAC,CAAC;IAEFC,MAAM,CAACE,EAAE,CAAC,UAAU,EAAE,MAAM;MACxBlB,SAAS,CAAC,KAAK,CAAC;MAChB,IAAI;QAAE,IAAIoB,KAAK,CAAC,4DAA4D,CAAC,CAACC,IAAI,CAAC,CAAC,CAACR,KAAK,CAAC,MAAI,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,OAAMS,CAAC,EAAC,CAAC;IACnH,CAAC,CAAC;IAEFN,MAAM,CAACE,EAAE,CAAC,UAAU,EAAE,MAAMlB,SAAS,CAAC,QAAQ,CAAC,CAAC;;IAEhD;IACAgB,MAAM,CAACE,EAAE,CAAC,kBAAkB,EAAE,CAAC;MAAEK,OAAO;MAAEC;IAAK,CAAC,KAAK;MACjD;MACA,IAAI;QAAE,IAAIJ,KAAK,CAAC,sEAAsE,CAAC,CAACC,IAAI,CAAC,CAAC,CAACR,KAAK,CAAC,MAAI,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,OAAMS,CAAC,EAAC,CAAC;;MAEzH;MACApB,mBAAmB,CAAC;QAAEqB,OAAO;QAAEC;MAAK,CAAC,CAAC;;MAEtC;MACAC,UAAU,CAAC,MAAMvB,mBAAmB,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;IACtD,CAAC,CAAC;;IAEF;IACAzB,WAAW,CAAC,MAAM;MACd,IAAG0B,MAAM,CAACuB,OAAO,IAAI,CAACtB,MAAM,CAACsB,OAAO,EAAE;QAClC,MAAM9C,CAAC,GAAGD,MAAM,CAACC,CAAC;QAClBwB,MAAM,CAACsB,OAAO,GAAG9C,CAAC,CAAC+C,GAAG,CAACxB,MAAM,CAACuB,OAAO,CAAC,CAACE,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC;QAClEhD,CAAC,CAACiD,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAAC1B,MAAM,CAACsB,OAAO,CAAC;QAEvF,MAAMK,QAAQ,GAAG,IAAInD,CAAC,CAACoD,IAAI,CAAC;UACxBC,OAAO,EAAE,6EAA6E;UACtFC,SAAS,EAAE,+EAA+E;UAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UAAEC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;QAC3C,CAAC,CAAC;QACF/B,MAAM,CAACqB,OAAO,GAAG9C,CAAC,CAACyB,MAAM,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;UAACgC,IAAI,EAAEN;QAAQ,CAAC,CAAC,CAACD,KAAK,CAAC1B,MAAM,CAACsB,OAAO,CAAC;MACrF;IACJ,CAAC,CAAC;IAEF,OAAO,MAAMV,MAAM,CAACsB,UAAU,CAAC,CAAC;EAClC,CAAC,EAAE,CAAC5C,MAAM,CAAC,CAAC;;EAEZ;EACAhC,SAAS,CAAC,MAAM;IACZ,IAAGmC,OAAO,IAAIO,MAAM,CAACsB,OAAO,IAAI/C,MAAM,CAACC,CAAC,IAAIyB,MAAM,CAACqB,OAAO,EAAE;MACxD,MAAM9C,CAAC,GAAGD,MAAM,CAACC,CAAC;MAClB,MAAM2D,GAAG,GAAGC,UAAU,CAAC3C,OAAO,CAAC0C,GAAG,CAAC;MACnC,MAAME,GAAG,GAAGD,UAAU,CAAC3C,OAAO,CAAC4C,GAAG,CAAC;MAEnC,IAAG,CAACC,KAAK,CAACH,GAAG,CAAC,EAAE;QACblC,MAAM,CAACqB,OAAO,CAACiB,SAAS,CAAC,CAACJ,GAAG,EAAEE,GAAG,CAAC,CAAC;QACpCrC,MAAM,CAACsB,OAAO,CAACE,OAAO,CAAC,CAACW,GAAG,EAAEE,GAAG,CAAC,CAAC;;QAElC;QACA,IAAI1C,MAAM,KAAK,KAAK,EAAE;UAClB,MAAM6C,OAAO,GAAG,IAAIhE,CAAC,CAACoD,IAAI,CAAC;YACvBC,OAAO,EAAE,gGAAgG;YACzGC,SAAS,EAAE,+EAA+E;YAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;YAAEC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;UAC3C,CAAC,CAAC;UACF/B,MAAM,CAACqB,OAAO,CAACmB,OAAO,CAACD,OAAO,CAAC;QACnC,CAAC,MAAM;UACH,MAAMb,QAAQ,GAAG,IAAInD,CAAC,CAACoD,IAAI,CAAC;YACxBC,OAAO,EAAE,6EAA6E;YACtFC,SAAS,EAAE,+EAA+E;YAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;YAAEC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;UAC3C,CAAC,CAAC;UACF/B,MAAM,CAACqB,OAAO,CAACmB,OAAO,CAACd,QAAQ,CAAC;QACpC;MACH;IACJ;EACJ,CAAC,EAAE,CAAClC,OAAO,EAAEE,MAAM,CAAC,CAAC;;EAErB;EACA,IAAI+C,WAAW,GAAG,eAAe;EACjC,IAAIC,UAAU,GAAG,eAAe;EAChC,IAAIhD,MAAM,KAAK,KAAK,EAAE;IAAE+C,WAAW,GAAG,YAAY;IAAEC,UAAU,GAAG,uBAAuB;EAAE,CAAC,MACtF,IAAIhD,MAAM,KAAK,WAAW,EAAE;IAAE+C,WAAW,GAAG,kBAAkB;IAAEC,UAAU,GAAG,YAAY;EAAE;EAEhG,oBACE/E,OAAA;IAAKgF,SAAS,EAAC,iBAAiB;IAAA7E,QAAA,gBAC7BH,OAAA,CAACE,WAAW;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEfP,OAAA;MAAKgF,SAAS,EAAE,gBAAgBF,WAAW,EAAG;MAAA3E,QAAA,gBAC1CH,OAAA;QAAIgF,SAAS,EAAC,aAAa;QAAA7E,QAAA,EAAE4E;MAAU;QAAA3E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC7CP,OAAA;QAAGgF,SAAS,EAAC,WAAW;QAAA7E,QAAA,GAAC,YAAU,EAAC,CAAAwB,IAAI,aAAJA,IAAI,wBAAAF,YAAA,GAAJE,IAAI,CAAEsD,MAAM,cAAAxD,YAAA,uBAAZA,YAAA,CAAcyD,QAAQ,KAAI,MAAM;MAAA;QAAA9E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAGxEsB,OAAO,iBACN7B,OAAA;QAAGsB,IAAI,EAAE,sDAAsDO,OAAO,CAAC0C,GAAG,IAAI1C,OAAO,CAAC4C,GAAG,EAAG;QACzFU,MAAM,EAAC,QAAQ;QACf9D,GAAG,EAAC,YAAY;QAChB+D,KAAK,EAAE;UAACC,OAAO,EAAC,cAAc;UAAEC,SAAS,EAAC,MAAM;UAAEC,UAAU,EAAC,iBAAiB;UAAEC,KAAK,EAAC,OAAO;UAAEC,OAAO,EAAC,UAAU;UAAEC,YAAY,EAAC,MAAM;UAAEC,cAAc,EAAC,MAAM;UAAEC,QAAQ,EAAC;QAAQ,CAAE;QAAAzF,QAAA,EAAC;MAEtL;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CACJ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAENP,OAAA;MAAK6F,GAAG,EAAE1D,MAAO;MAAC6C,SAAS,EAAC;IAAU;MAAA5E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAG5C0B,gBAAgB,iBACbjC,OAAA;MAAKgF,SAAS,EAAE,oBAAoB/C,gBAAgB,CAACuB,IAAI,KAAK,QAAQ,GAAG,mBAAmB,GAAG,EAAE,EAAG;MAAArD,QAAA,gBAChGH,OAAA;QAAMgF,SAAS,EAAC,gBAAgB;QAAA7E,QAAA,GAC3B8B,gBAAgB,CAACuB,IAAI,KAAK,MAAM,GAAG,GAAG,GAAG,IAAI,EAAC,GAAC,EAACvB,gBAAgB,CAACsB,OAAO;MAAA;QAAAnD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvE,CAAC,eACPP,OAAA;QAAQgF,SAAS,EAAC,iBAAiB;QAACc,OAAO,EAAEA,CAAA,KAAM5D,mBAAmB,CAAC,IAAI,CAAE;QAAA/B,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxF,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACiB,EAAA,CA5IID,aAAa;EAAA,QACE3B,SAAS;AAAA;AAAAmG,GAAA,GADxBxE,aAAa;AA6InB,eAAeA,aAAa;AAAC,IAAAf,EAAA,EAAAuF,GAAA;AAAAC,YAAA,CAAAxF,EAAA;AAAAwF,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}