{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shesafe\\\\client\\\\src\\\\Pages\\\\CommunityMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000'; // Standardized URL\n\nconst MapStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    .community-container { display: flex; height: calc(100vh - 70px); position: relative; }\n    .map-full { flex: 1; z-index: 1; }\n    .report-btn-float { position: absolute; bottom: 30px; right: 30px; background: #dc3545; color: white; padding: 15px 30px; border-radius: 50px; font-weight: bold; border: none; cursor: pointer; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3); font-size: 1.1rem; }\n    .report-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); z-index: 2000; width: 300px; }\n    .form-group { margin-bottom: 1rem; }\n    .form-group label { display: block; margin-bottom: 0.5rem; }\n    .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }\n    .btn-submit { background: #dc3545; color: white; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; font-weight: bold; }\n    .btn-cancel { background: #eee; color: #333; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; margin-top: 10px; }\n    .instruction-banner { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 1000; font-weight: bold; }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 3\n}, this);\n_c = MapStyles;\nconst loadLeaflet = cb => {\n  if (window.L) return cb();\n  const s = document.createElement('script');\n  s.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n  s.onload = cb;\n  document.head.appendChild(s);\n  const c = document.createElement('link');\n  c.rel = 'stylesheet';\n  c.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n  document.head.appendChild(c);\n};\nconst CommunityMap = () => {\n  _s();\n  const [incidents, setIncidents] = useState([]);\n  const [reportMode, setReportMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [newCoords, setNewCoords] = useState(null);\n  const [currentUserId, setCurrentUserId] = useState(null);\n\n  // Form State\n  const [type, setType] = useState('harassment');\n  const [desc, setDesc] = useState('');\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n\n  // 1. Get User ID from Token\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));\n        const payload = JSON.parse(jsonPayload);\n        setCurrentUserId(payload.user.id);\n      } catch (e) {\n        console.error(\"Token decode error\", e);\n      }\n    }\n  }, []);\n\n  // 2. Fetch Incidents\n  const fetchIncidents = async () => {\n    try {\n      const res = await axios.get(`${API_URL}/api/incidents`);\n      setIncidents(res.data);\n    } catch (e) {\n      console.error(\"Fetch incidents failed\", e);\n    }\n  };\n  useEffect(() => {\n    fetchIncidents();\n\n    // Setup Global Delete Handler for Popups\n    window.handleDeleteIncident = async id => {\n      const token = localStorage.getItem('token');\n      if (!token || !window.confirm(\"Delete this report?\")) return;\n      try {\n        await axios.delete(`${API_URL}/api/incidents/${id}`, {\n          headers: {\n            'x-auth-token': token\n          }\n        });\n        alert(\"Report deleted.\");\n        fetchIncidents(); // Refresh Map\n      } catch (e) {\n        alert(\"Failed to delete. You might not be the owner.\");\n      }\n    };\n    loadLeaflet(() => {\n      if (window.L && mapRef.current && !mapInstance.current) {\n        const L = window.L;\n        const map = L.map(mapRef.current).setView([26.7606, 83.3732], 13);\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n        mapInstance.current = map;\n        map.on('click', e => {\n          if (window.reportModeActive) {\n            setNewCoords(e.latlng);\n            setShowForm(true);\n            setReportMode(false);\n            window.reportModeActive = false;\n          }\n        });\n      }\n    });\n  }, []);\n\n  // 3. Render Markers\n  useEffect(() => {\n    if (mapInstance.current && window.L) {\n      const L = window.L;\n      markersRef.current.forEach(m => m.remove());\n      markersRef.current = [];\n      incidents.forEach(inc => {\n        let colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';\n        if (inc.type === 'lighting') colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-gold.png';\n        const icon = new L.Icon({\n          iconUrl: colorUrl,\n          shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n          iconSize: [25, 41],\n          iconAnchor: [12, 41],\n          popupAnchor: [1, -34]\n        });\n        const isOwner = currentUserId === inc.userId;\n        const deleteBtn = isOwner ? `<br><button onclick=\"window.handleDeleteIncident('${inc._id}')\" style=\"background:#dc3545; color:white; border:none; padding:5px; width:100%; margin-top:5px; cursor:pointer;\">Delete</button>` : '';\n        const marker = L.marker([inc.location.lat, inc.location.lng], {\n          icon\n        }).addTo(mapInstance.current).bindPopup(`<b>${inc.type}</b><br>${inc.description}${deleteBtn}`);\n        markersRef.current.push(marker);\n      });\n    }\n  }, [incidents, currentUserId]);\n  const submitReport = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) return alert(\"Login required\");\n    try {\n      await axios.post(`${API_URL}/api/incidents`, {\n        type,\n        description: desc,\n        lat: newCoords.lat,\n        lng: newCoords.lng\n      }, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setShowForm(false);\n      setDesc('');\n      alert(\"Report Submitted!\");\n      fetchIncidents();\n    } catch (e) {\n      alert(\"Failed to submit\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"community-container\",\n    children: [/*#__PURE__*/_jsxDEV(MapStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), reportMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instruction-banner\",\n      children: \"Click map to report\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map-full\",\n      style: {\n        cursor: reportMode ? 'crosshair' : 'grab'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this), !showForm && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"report-btn-float\",\n      onClick: () => {\n        setReportMode(true);\n        window.reportModeActive = true;\n      },\n      children: \"\\u26A0\\uFE0F Report Incident\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 27\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Report Incident\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: type,\n          onChange: e => setType(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"harassment\",\n            children: \"Harassment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"lighting\",\n            children: \"Poor Lighting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"theft\",\n            children: \"Theft\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"other\",\n            children: \"Other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: \"3\",\n          value: desc,\n          onChange: e => setDesc(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-submit\",\n        onClick: submitReport,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-cancel\",\n        onClick: () => setShowForm(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n};\n_s(CommunityMap, \"iXFfzNz9CbPhVmYviidhdyE7Uqs=\");\n_c2 = CommunityMap;\nexport default CommunityMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapStyles\");\n$RefreshReg$(_c2, \"CommunityMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","API_URL","MapStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","loadLeaflet","cb","window","L","s","document","createElement","src","onload","head","appendChild","c","rel","href","CommunityMap","_s","incidents","setIncidents","reportMode","setReportMode","showForm","setShowForm","newCoords","setNewCoords","currentUserId","setCurrentUserId","type","setType","desc","setDesc","mapRef","mapInstance","markersRef","token","localStorage","getItem","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","charCodeAt","toString","slice","join","payload","JSON","parse","user","id","e","console","error","fetchIncidents","res","get","data","handleDeleteIncident","confirm","delete","headers","alert","current","setView","tileLayer","addTo","on","reportModeActive","latlng","forEach","m","remove","inc","colorUrl","icon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","isOwner","userId","deleteBtn","_id","marker","location","lat","lng","bindPopup","description","push","submitReport","post","className","ref","style","cursor","onClick","value","onChange","target","rows","_c2","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/shesafe/client/src/Pages/CommunityMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000'; // Standardized URL\r\n\r\nconst MapStyles = () => (\r\n  <style>{`\r\n    .community-container { display: flex; height: calc(100vh - 70px); position: relative; }\r\n    .map-full { flex: 1; z-index: 1; }\r\n    .report-btn-float { position: absolute; bottom: 30px; right: 30px; background: #dc3545; color: white; padding: 15px 30px; border-radius: 50px; font-weight: bold; border: none; cursor: pointer; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3); font-size: 1.1rem; }\r\n    .report-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); z-index: 2000; width: 300px; }\r\n    .form-group { margin-bottom: 1rem; }\r\n    .form-group label { display: block; margin-bottom: 0.5rem; }\r\n    .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }\r\n    .btn-submit { background: #dc3545; color: white; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; font-weight: bold; }\r\n    .btn-cancel { background: #eee; color: #333; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; margin-top: 10px; }\r\n    .instruction-banner { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 1000; font-weight: bold; }\r\n  `}</style>\r\n);\r\n\r\nconst loadLeaflet = (cb) => {\r\n    if (window.L) return cb();\r\n    const s = document.createElement('script'); s.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'; s.onload = cb; document.head.appendChild(s);\r\n    const c = document.createElement('link'); c.rel = 'stylesheet'; c.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'; document.head.appendChild(c);\r\n};\r\n\r\nconst CommunityMap = () => {\r\n    const [incidents, setIncidents] = useState([]);\r\n    const [reportMode, setReportMode] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [newCoords, setNewCoords] = useState(null);\r\n    const [currentUserId, setCurrentUserId] = useState(null);\r\n    \r\n    // Form State\r\n    const [type, setType] = useState('harassment');\r\n    const [desc, setDesc] = useState('');\r\n\r\n    const mapRef = useRef(null);\r\n    const mapInstance = useRef(null);\r\n    const markersRef = useRef([]);\r\n\r\n    // 1. Get User ID from Token\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            try {\r\n                const base64Url = token.split('.')[1];\r\n                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n                const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));\r\n                const payload = JSON.parse(jsonPayload);\r\n                setCurrentUserId(payload.user.id);\r\n            } catch (e) { console.error(\"Token decode error\", e); }\r\n        }\r\n    }, []);\r\n\r\n    // 2. Fetch Incidents\r\n    const fetchIncidents = async () => {\r\n        try {\r\n            const res = await axios.get(`${API_URL}/api/incidents`);\r\n            setIncidents(res.data);\r\n        } catch(e) { console.error(\"Fetch incidents failed\", e); }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchIncidents();\r\n        \r\n        // Setup Global Delete Handler for Popups\r\n        window.handleDeleteIncident = async (id) => {\r\n            const token = localStorage.getItem('token');\r\n            if(!token || !window.confirm(\"Delete this report?\")) return;\r\n            try {\r\n                await axios.delete(`${API_URL}/api/incidents/${id}`, { headers: { 'x-auth-token': token } });\r\n                alert(\"Report deleted.\");\r\n                fetchIncidents(); // Refresh Map\r\n            } catch(e) { alert(\"Failed to delete. You might not be the owner.\"); }\r\n        };\r\n\r\n        loadLeaflet(() => {\r\n            if(window.L && mapRef.current && !mapInstance.current) {\r\n                const L = window.L;\r\n                const map = L.map(mapRef.current).setView([26.7606, 83.3732], 13);\r\n                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n                mapInstance.current = map;\r\n\r\n                map.on('click', (e) => {\r\n                    if (window.reportModeActive) { \r\n                        setNewCoords(e.latlng);\r\n                        setShowForm(true);\r\n                        setReportMode(false);\r\n                        window.reportModeActive = false;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    // 3. Render Markers\r\n    useEffect(() => {\r\n        if(mapInstance.current && window.L) {\r\n            const L = window.L;\r\n            markersRef.current.forEach(m => m.remove());\r\n            markersRef.current = [];\r\n\r\n            incidents.forEach(inc => {\r\n                let colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';\r\n                if (inc.type === 'lighting') colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-gold.png';\r\n                \r\n                const icon = new L.Icon({\r\n                    iconUrl: colorUrl,\r\n                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n                    iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34]\r\n                });\r\n                \r\n                const isOwner = currentUserId === inc.userId;\r\n                const deleteBtn = isOwner ? `<br><button onclick=\"window.handleDeleteIncident('${inc._id}')\" style=\"background:#dc3545; color:white; border:none; padding:5px; width:100%; margin-top:5px; cursor:pointer;\">Delete</button>` : '';\r\n\r\n                const marker = L.marker([inc.location.lat, inc.location.lng], {icon})\r\n                  .addTo(mapInstance.current)\r\n                  .bindPopup(`<b>${inc.type}</b><br>${inc.description}${deleteBtn}`);\r\n                \r\n                markersRef.current.push(marker);\r\n            });\r\n        }\r\n    }, [incidents, currentUserId]);\r\n\r\n    const submitReport = async () => {\r\n        const token = localStorage.getItem('token');\r\n        if(!token) return alert(\"Login required\");\r\n        try {\r\n            await axios.post(`${API_URL}/api/incidents`, {\r\n                type, description: desc, lat: newCoords.lat, lng: newCoords.lng\r\n            }, { headers: { 'x-auth-token': token } });\r\n            \r\n            setShowForm(false); setDesc(''); alert(\"Report Submitted!\");\r\n            fetchIncidents();\r\n        } catch(e) { alert(\"Failed to submit\"); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"community-container\">\r\n            <MapStyles />\r\n            {reportMode && <div className=\"instruction-banner\">Click map to report</div>}\r\n            <div ref={mapRef} className=\"map-full\" style={{cursor: reportMode ? 'crosshair' : 'grab'}}></div>\r\n            \r\n            {!showForm && <button className=\"report-btn-float\" onClick={() => { setReportMode(true); window.reportModeActive = true; }}>⚠️ Report Incident</button>}\r\n\r\n            {showForm && (\r\n                <div className=\"report-modal\">\r\n                    <h3>Report Incident</h3>\r\n                    <div className=\"form-group\">\r\n                        <label>Type</label>\r\n                        <select value={type} onChange={e => setType(e.target.value)}>\r\n                            <option value=\"harassment\">Harassment</option>\r\n                            <option value=\"lighting\">Poor Lighting</option>\r\n                            <option value=\"theft\">Theft</option>\r\n                            <option value=\"other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Description</label>\r\n                        <textarea rows=\"3\" value={desc} onChange={e => setDesc(e.target.value)}></textarea>\r\n                    </div>\r\n                    <button className=\"btn-submit\" onClick={submitReport}>Submit</button>\r\n                    <button className=\"btn-cancel\" onClick={() => setShowForm(false)}>Cancel</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nexport default CommunityMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}