{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shesecure\\\\client\\\\src\\\\Pages\\\\TrackTripPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TrackTripPage = () => {\n  _s();\n  const {\n    tripId\n  } = useParams();\n  const [trip, setTrip] = useState(null);\n  const [livePos, setLivePos] = useState(null);\n  const mapRef = useRef(null);\n  const mapObj = useRef(null);\n  const marker = useRef(null);\n  useEffect(() => {\n    // Load Leaflet\n    const loadMap = () => {\n      if (window.L) return;\n      const c = document.createElement('link');\n      c.rel = 'stylesheet';\n      c.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n      document.head.appendChild(c);\n      const s = document.createElement('script');\n      s.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n      s.onload = () => {\n        if (mapRef.current && !mapObj.current) {\n          const L = window.L;\n          mapObj.current = L.map(mapRef.current).setView([26.76, 83.37], 13);\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapObj.current);\n          marker.current = L.marker([26.76, 83.37]).addTo(mapObj.current);\n        }\n      };\n      document.head.appendChild(s);\n    };\n    loadMap();\n\n    // Fetch Trip & Socket\n    axios.get(`http://172.18.24.204:5000/api/trips/${tripId}`).then(res => setTrip(res.data)).catch(console.error);\n    const socket = io('http://localhost:5000');\n    socket.emit('joinTripRoom', tripId);\n    socket.on('tripUpdate', coords => {\n      setLivePos(coords);\n      if (mapObj.current && window.L) {\n        marker.current.setLatLng([coords.lat, coords.lng]);\n        mapObj.current.setView([coords.lat, coords.lng]);\n      }\n    });\n    return () => socket.disconnect();\n  }, [tripId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      width: '100%',\n      height: '100vh'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 10\n  }, this);\n};\n_s(TrackTripPage, \"U29VuYrpoQg45v1bvnQgXTrLtlg=\", false, function () {\n  return [useParams];\n});\n_c = TrackTripPage;\nexport default TrackTripPage;\nvar _c;\n$RefreshReg$(_c, \"TrackTripPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","axios","io","jsxDEV","_jsxDEV","TrackTripPage","_s","tripId","trip","setTrip","livePos","setLivePos","mapRef","mapObj","marker","loadMap","window","L","c","document","createElement","rel","href","head","appendChild","s","src","onload","current","map","setView","tileLayer","addTo","get","then","res","data","catch","console","error","socket","emit","on","coords","setLatLng","lat","lng","disconnect","ref","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/shesecure/client/src/Pages/TrackTripPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst TrackTripPage = () => {\r\n  const { tripId } = useParams();\r\n  const [trip, setTrip] = useState(null);\r\n  const [livePos, setLivePos] = useState(null);\r\n  const mapRef = useRef(null);\r\n  const mapObj = useRef(null);\r\n  const marker = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Load Leaflet\r\n    const loadMap = () => {\r\n        if(window.L) return;\r\n        const c = document.createElement('link'); c.rel='stylesheet'; c.href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'; document.head.appendChild(c);\r\n        const s = document.createElement('script'); s.src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'; \r\n        s.onload = () => {\r\n            if(mapRef.current && !mapObj.current) {\r\n                const L = window.L;\r\n                mapObj.current = L.map(mapRef.current).setView([26.76, 83.37], 13);\r\n                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapObj.current);\r\n                marker.current = L.marker([26.76, 83.37]).addTo(mapObj.current);\r\n            }\r\n        };\r\n        document.head.appendChild(s);\r\n    };\r\n    loadMap();\r\n\r\n    // Fetch Trip & Socket\r\n    axios.get(`http://172.18.24.204:5000/api/trips/${tripId}`).then(res => setTrip(res.data)).catch(console.error);\r\n    const socket = io('http://localhost:5000');\r\n    socket.emit('joinTripRoom', tripId);\r\n    socket.on('tripUpdate', (coords) => {\r\n        setLivePos(coords);\r\n        if(mapObj.current && window.L) {\r\n             marker.current.setLatLng([coords.lat, coords.lng]);\r\n             mapObj.current.setView([coords.lat, coords.lng]);\r\n        }\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, [tripId]);\r\n\r\n  return <div ref={mapRef} style={{width:'100%', height:'100vh'}}></div>;\r\n};\r\n\r\nexport default TrackTripPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}