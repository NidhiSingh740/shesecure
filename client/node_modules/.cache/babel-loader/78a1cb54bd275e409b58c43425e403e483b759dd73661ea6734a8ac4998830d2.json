{"ast":null,"code":"var _jsxFileName = \"H:\\\\shesecure\\\\client\\\\src\\\\Pages\\\\CommunityMap.js\",\n  _s = $RefreshSig$();\n// \nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://10.15.17.245:5000'; // Your IP\n\nconst MapStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    .community-container { display: flex; height: calc(100vh - 70px); position: relative; }\n    .map-full { flex: 1; z-index: 1; }\n    .report-btn-float { position: absolute; bottom: 30px; right: 30px; background: #dc3545; color: white; padding: 15px 30px; border-radius: 50px; font-weight: bold; border: none; cursor: pointer; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3); font-size: 1.1rem; }\n    .report-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); z-index: 2000; width: 300px; }\n    .report-modal h3 { margin-top: 0; color: #333; }\n    .form-group { margin-bottom: 1rem; }\n    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #555; }\n    .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\n    .btn-submit { background: #dc3545; color: white; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; font-weight: bold; }\n    .btn-cancel { background: #eee; color: #333; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; margin-top: 10px; }\n    .instruction-banner { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 1000; font-weight: bold; }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 5\n}, this);\n_c = MapStyles;\nconst CommunityMap = () => {\n  _s();\n  const [incidents, setIncidents] = useState([]);\n  const [reportMode, setReportMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [newCoords, setNewCoords] = useState(null);\n  const [currentUserId, setCurrentUserId] = useState(null);\n\n  // Form State\n  const [type, setType] = useState('harassment');\n  const [desc, setDesc] = useState('');\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n\n  // 1. Get User ID from Token\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        // Decode token to get user ID payload\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n        const payload = JSON.parse(jsonPayload);\n        setCurrentUserId(payload.user.id);\n      } catch (e) {\n        console.error(\"Token decode error\", e);\n      }\n    }\n  }, []);\n\n  // 2. Fetch Incidents & Setup Delete Handler\n  useEffect(() => {\n    const fetchIncidents = () => {\n      axios.get(`${API_URL}/api/incidents`).then(res => setIncidents(res.data)).catch(console.error);\n    };\n    fetchIncidents();\n\n    // ** Global function for popup button to call **\n    window.handleDeleteIncident = async id => {\n      const token = localStorage.getItem('token');\n      if (!token || !window.confirm(\"Are you sure you want to delete this report?\")) return;\n      try {\n        await axios.delete(`${API_URL}/api/incidents/${id}`, {\n          headers: {\n            'x-auth-token': token\n          }\n        });\n        alert(\"Report deleted.\");\n        fetchIncidents(); // Refresh map\n      } catch (e) {\n        alert(\"Failed to delete. You might not be the owner.\");\n      }\n    };\n\n    // Initialize Map\n    if (window.L && mapRef.current && !mapInstance.current) {\n      const L = window.L;\n      const map = L.map(mapRef.current).setView([26.7606, 83.3732], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      mapInstance.current = map;\n      map.on('click', e => {\n        if (window.reportModeActive) {\n          setNewCoords(e.latlng);\n          setShowForm(true);\n          setReportMode(false);\n          window.reportModeActive = false;\n        }\n      });\n    }\n\n    // Cleanup on unmount\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.off(); // Remove event listeners\n        mapInstance.current.remove(); // Destroy map instance\n        mapInstance.current = null;\n      }\n    };\n  }, []);\n\n  // 3. Update Markers\n  useEffect(() => {\n    if (mapInstance.current && window.L) {\n      const L = window.L;\n\n      // Clear old markers\n      markersRef.current.forEach(m => m.remove());\n      markersRef.current = [];\n      incidents.forEach(inc => {\n        let colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';\n        if (inc.type === 'lighting') colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-gold.png';\n        const icon = new L.Icon({\n          iconUrl: colorUrl,\n          shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n          iconSize: [25, 41],\n          iconAnchor: [12, 41],\n          popupAnchor: [1, -34]\n        });\n\n        // ** LOGIC: If I own this report, show Delete button **\n        const isOwner = currentUserId === inc.userId;\n        const deleteBtn = isOwner ? `<br><button onclick=\"window.handleDeleteIncident('${inc._id}')\" style=\"background:#dc3545; color:white; border:none; border-radius:4px; padding:5px 10px; margin-top:5px; cursor:pointer; width:100%;\">Delete</button>` : '';\n        const marker = L.marker([inc.location.lat, inc.location.lng], {\n          icon\n        }).addTo(mapInstance.current).bindPopup(`\n                    <div style=\"font-family:sans-serif;\">\n                        <b style=\"text-transform:uppercase; color:#333;\">${inc.type}</b>\n                        <p style=\"margin:5px 0;\">${inc.description}</p>\n                        <small style=\"color:#666;\">${new Date(inc.timestamp).toLocaleDateString()}</small>\n                        ${deleteBtn}\n                    </div>\n                 `);\n        markersRef.current.push(marker);\n      });\n    }\n  }, [incidents, currentUserId]);\n  const enableReportMode = () => {\n    setReportMode(true);\n    window.reportModeActive = true;\n  };\n  const submitReport = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) return alert(\"Login required\");\n    try {\n      await axios.post(`${API_URL}/api/incidents`, {\n        type,\n        description: desc,\n        lat: newCoords.lat,\n        lng: newCoords.lng\n      }, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setShowForm(false);\n      setDesc('');\n      alert(\"Report Submitted!\");\n      // Refresh list\n      const res = await axios.get(`${API_URL}/api/incidents`);\n      setIncidents(res.data);\n    } catch (e) {\n      alert(\"Failed to submit\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"community-container\",\n    children: [/*#__PURE__*/_jsxDEV(MapStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this), reportMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instruction-banner\",\n      children: \"Click on the map location to report incident\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map-full\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }, this), !showForm && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"report-btn-float\",\n      onClick: enableReportMode,\n      children: \"\\u26A0\\uFE0F Report Incident\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 27\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Report Unsafe Area\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: type,\n          onChange: e => setType(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"harassment\",\n            children: \"Harassment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"lighting\",\n            children: \"Poor Lighting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"theft\",\n            children: \"Theft/Snatching\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"accident\",\n            children: \"Accident Prone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"other\",\n            children: \"Other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: \"3\",\n          value: desc,\n          onChange: e => setDesc(e.target.value),\n          placeholder: \"Describe what happened...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-submit\",\n        onClick: submitReport,\n        children: \"Submit Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-cancel\",\n        onClick: () => setShowForm(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, this);\n};\n_s(CommunityMap, \"iXFfzNz9CbPhVmYviidhdyE7Uqs=\");\n_c2 = CommunityMap;\nexport default CommunityMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapStyles\");\n$RefreshReg$(_c2, \"CommunityMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","API_URL","MapStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","CommunityMap","_s","incidents","setIncidents","reportMode","setReportMode","showForm","setShowForm","newCoords","setNewCoords","currentUserId","setCurrentUserId","type","setType","desc","setDesc","mapRef","mapInstance","markersRef","token","localStorage","getItem","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","payload","JSON","parse","user","id","e","console","error","fetchIncidents","get","then","res","data","catch","window","handleDeleteIncident","confirm","delete","headers","alert","L","current","setView","tileLayer","addTo","on","reportModeActive","latlng","off","remove","forEach","m","inc","colorUrl","icon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","isOwner","userId","deleteBtn","_id","marker","location","lat","lng","bindPopup","description","Date","timestamp","toLocaleDateString","push","enableReportMode","submitReport","post","className","ref","onClick","value","onChange","target","rows","placeholder","_c2","$RefreshReg$"],"sources":["H:/shesecure/client/src/Pages/CommunityMap.js"],"sourcesContent":["\r\n// \r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://10.15.17.245:5000'; // Your IP\r\n\r\nconst MapStyles = () => (\r\n    <style>{`\r\n    .community-container { display: flex; height: calc(100vh - 70px); position: relative; }\r\n    .map-full { flex: 1; z-index: 1; }\r\n    .report-btn-float { position: absolute; bottom: 30px; right: 30px; background: #dc3545; color: white; padding: 15px 30px; border-radius: 50px; font-weight: bold; border: none; cursor: pointer; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3); font-size: 1.1rem; }\r\n    .report-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); z-index: 2000; width: 300px; }\r\n    .report-modal h3 { margin-top: 0; color: #333; }\r\n    .form-group { margin-bottom: 1rem; }\r\n    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #555; }\r\n    .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\r\n    .btn-submit { background: #dc3545; color: white; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; font-weight: bold; }\r\n    .btn-cancel { background: #eee; color: #333; border: none; padding: 10px; width: 100%; border-radius: 4px; cursor: pointer; margin-top: 10px; }\r\n    .instruction-banner { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 1000; font-weight: bold; }\r\n  `}</style>\r\n);\r\n\r\nconst CommunityMap = () => {\r\n    const [incidents, setIncidents] = useState([]);\r\n    const [reportMode, setReportMode] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [newCoords, setNewCoords] = useState(null);\r\n    const [currentUserId, setCurrentUserId] = useState(null);\r\n\r\n    // Form State\r\n    const [type, setType] = useState('harassment');\r\n    const [desc, setDesc] = useState('');\r\n\r\n    const mapRef = useRef(null);\r\n    const mapInstance = useRef(null);\r\n    const markersRef = useRef([]);\r\n\r\n    // 1. Get User ID from Token\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            try {\r\n                // Decode token to get user ID payload\r\n                const base64Url = token.split('.')[1];\r\n                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n                const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n                }).join(''));\r\n                const payload = JSON.parse(jsonPayload);\r\n                setCurrentUserId(payload.user.id);\r\n            } catch (e) {\r\n                console.error(\"Token decode error\", e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // 2. Fetch Incidents & Setup Delete Handler\r\n    useEffect(() => {\r\n        const fetchIncidents = () => {\r\n            axios.get(`${API_URL}/api/incidents`).then(res => setIncidents(res.data)).catch(console.error);\r\n        };\r\n        fetchIncidents();\r\n\r\n        // ** Global function for popup button to call **\r\n        window.handleDeleteIncident = async (id) => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token || !window.confirm(\"Are you sure you want to delete this report?\")) return;\r\n\r\n            try {\r\n                await axios.delete(`${API_URL}/api/incidents/${id}`, { headers: { 'x-auth-token': token } });\r\n                alert(\"Report deleted.\");\r\n                fetchIncidents(); // Refresh map\r\n            } catch (e) {\r\n                alert(\"Failed to delete. You might not be the owner.\");\r\n            }\r\n        };\r\n\r\n        // Initialize Map\r\n        if (window.L && mapRef.current && !mapInstance.current) {\r\n            const L = window.L;\r\n            const map = L.map(mapRef.current).setView([26.7606, 83.3732], 13);\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n            mapInstance.current = map;\r\n\r\n            map.on('click', (e) => {\r\n                if (window.reportModeActive) {\r\n                    setNewCoords(e.latlng);\r\n                    setShowForm(true);\r\n                    setReportMode(false);\r\n                    window.reportModeActive = false;\r\n                }\r\n            });\r\n        }\r\n\r\n        // Cleanup on unmount\r\n        return () => {\r\n            if (mapInstance.current) {\r\n                mapInstance.current.off(); // Remove event listeners\r\n                mapInstance.current.remove(); // Destroy map instance\r\n                mapInstance.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // 3. Update Markers\r\n    useEffect(() => {\r\n        if (mapInstance.current && window.L) {\r\n            const L = window.L;\r\n\r\n            // Clear old markers\r\n            markersRef.current.forEach(m => m.remove());\r\n            markersRef.current = [];\r\n\r\n            incidents.forEach(inc => {\r\n                let colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';\r\n                if (inc.type === 'lighting') colorUrl = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-gold.png';\r\n\r\n                const icon = new L.Icon({\r\n                    iconUrl: colorUrl,\r\n                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n                    iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34]\r\n                });\r\n\r\n                // ** LOGIC: If I own this report, show Delete button **\r\n                const isOwner = currentUserId === inc.userId;\r\n                const deleteBtn = isOwner ? `<br><button onclick=\"window.handleDeleteIncident('${inc._id}')\" style=\"background:#dc3545; color:white; border:none; border-radius:4px; padding:5px 10px; margin-top:5px; cursor:pointer; width:100%;\">Delete</button>` : '';\r\n\r\n                const marker = L.marker([inc.location.lat, inc.location.lng], { icon })\r\n                    .addTo(mapInstance.current)\r\n                    .bindPopup(`\r\n                    <div style=\"font-family:sans-serif;\">\r\n                        <b style=\"text-transform:uppercase; color:#333;\">${inc.type}</b>\r\n                        <p style=\"margin:5px 0;\">${inc.description}</p>\r\n                        <small style=\"color:#666;\">${new Date(inc.timestamp).toLocaleDateString()}</small>\r\n                        ${deleteBtn}\r\n                    </div>\r\n                 `);\r\n\r\n                markersRef.current.push(marker);\r\n            });\r\n        }\r\n    }, [incidents, currentUserId]);\r\n\r\n    const enableReportMode = () => {\r\n        setReportMode(true);\r\n        window.reportModeActive = true;\r\n    };\r\n\r\n    const submitReport = async () => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return alert(\"Login required\");\r\n        try {\r\n            await axios.post(`${API_URL}/api/incidents`, {\r\n                type, description: desc, lat: newCoords.lat, lng: newCoords.lng\r\n            }, { headers: { 'x-auth-token': token } });\r\n\r\n            setShowForm(false); setDesc(''); alert(\"Report Submitted!\");\r\n            // Refresh list\r\n            const res = await axios.get(`${API_URL}/api/incidents`);\r\n            setIncidents(res.data);\r\n        } catch (e) { alert(\"Failed to submit\"); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"community-container\">\r\n            <MapStyles />\r\n            {reportMode && <div className=\"instruction-banner\">Click on the map location to report incident</div>}\r\n\r\n            <div ref={mapRef} className=\"map-full\"></div>\r\n\r\n            {!showForm && <button className=\"report-btn-float\" onClick={enableReportMode}>⚠️ Report Incident</button>}\r\n\r\n            {showForm && (\r\n                <div className=\"report-modal\">\r\n                    <h3>Report Unsafe Area</h3>\r\n                    <div className=\"form-group\">\r\n                        <label>Type</label>\r\n                        <select value={type} onChange={e => setType(e.target.value)}>\r\n                            <option value=\"harassment\">Harassment</option>\r\n                            <option value=\"lighting\">Poor Lighting</option>\r\n                            <option value=\"theft\">Theft/Snatching</option>\r\n                            <option value=\"accident\">Accident Prone</option>\r\n                            <option value=\"other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Description</label>\r\n                        <textarea rows=\"3\" value={desc} onChange={e => setDesc(e.target.value)} placeholder=\"Describe what happened...\"></textarea>\r\n                    </div>\r\n                    <button className=\"btn-submit\" onClick={submitReport}>Submit Report</button>\r\n                    <button className=\"btn-cancel\" onClick={() => setShowForm(false)}>Cancel</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nexport default CommunityMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}