{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shesafe\\\\client\\\\src\\\\components\\\\NotificationListener.js\",\n  _s = $RefreshSig$();\n// client/src/components/\nimport React, { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\n\n// --- STYLES (Self-Contained) ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NotificationStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    .notification-popup {\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background-color: #ffffff;\n      border-left: 5px solid #e74c3c; /* Red border for urgency */\n      box-shadow: 0 4px 15px rgba(0,0,0,0.2);\n      padding: 15px 20px;\n      border-radius: 8px;\n      z-index: 9999;\n      animation: slideIn 0.5s ease-out;\n      max-width: 350px;\n      font-family: sans-serif;\n    }\n    .notification-header { font-weight: bold; color: #e74c3c; margin-bottom: 5px; font-size: 1.1rem; }\n    .notification-body { color: #333; margin-bottom: 15px; font-size: 0.95rem; }\n    .track-btn {\n      background-color: #e74c3c;\n      color: white;\n      border: none;\n      padding: 8px 15px;\n      border-radius: 4px;\n      cursor: pointer;\n      font-weight: bold;\n      width: 100%;\n      margin-bottom: 5px;\n    }\n    .track-btn:hover { background-color: #c0392b; }\n    .dismiss-btn {\n      background: none;\n      border: none;\n      color: #999;\n      cursor: pointer;\n      width: 100%;\n      font-size: 0.8rem;\n    }\n    .dismiss-btn:hover { text-decoration: underline; }\n    @keyframes slideIn {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 8,\n  columnNumber: 3\n}, this);\n_c = NotificationStyles;\nconst NotificationListener = () => {\n  _s();\n  const [notification, setNotification] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // 1. Connect to socket\n    const socket = io('http://localhost:5000');\n\n    // 2. Listen for the 'receiveNotification' event from the server\n    socket.on('receiveNotification', data => {\n      // Play a sound (optional, might be blocked by browsers until interaction)\n      try {\n        const audio = new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg');\n        audio.play().catch(e => console.log(\"Audio play failed (user interaction needed)\"));\n      } catch (e) {}\n      setNotification(data);\n    });\n    return () => socket.disconnect();\n  }, []);\n  const handleTrackClick = () => {\n    if (notification) {\n      navigate(`/track/${notification.tripId}`);\n      setNotification(null); // Clear notification after clicking\n    }\n  };\n  if (!notification) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NotificationStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notification-header\",\n        children: \"\\u26A0\\uFE0F SAFETY ALERT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notification-body\",\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"track-btn\",\n        onClick: handleTrackClick,\n        children: \"TRACK LIVE LOCATION\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dismiss-btn\",\n        onClick: () => setNotification(null),\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(NotificationListener, \"Fa2oRSMdccct9cblf3XeKkvPVCY=\", false, function () {\n  return [useNavigate];\n});\n_c2 = NotificationListener;\nexport default NotificationListener;\nvar _c, _c2;\n$RefreshReg$(_c, \"NotificationStyles\");\n$RefreshReg$(_c2, \"NotificationListener\");","map":{"version":3,"names":["React","useEffect","useState","io","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","NotificationStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","NotificationListener","_s","notification","setNotification","navigate","socket","on","data","audio","Audio","play","catch","e","console","log","disconnect","handleTrackClick","tripId","className","message","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/shesafe/client/src/components/NotificationListener.js"],"sourcesContent":["// client/src/components/\r\nimport React, { useEffect, useState } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// --- STYLES (Self-Contained) ---\r\nconst NotificationStyles = () => (\r\n  <style>{`\r\n    .notification-popup {\r\n      position: fixed;\r\n      top: 20px;\r\n      right: 20px;\r\n      background-color: #ffffff;\r\n      border-left: 5px solid #e74c3c; /* Red border for urgency */\r\n      box-shadow: 0 4px 15px rgba(0,0,0,0.2);\r\n      padding: 15px 20px;\r\n      border-radius: 8px;\r\n      z-index: 9999;\r\n      animation: slideIn 0.5s ease-out;\r\n      max-width: 350px;\r\n      font-family: sans-serif;\r\n    }\r\n    .notification-header { font-weight: bold; color: #e74c3c; margin-bottom: 5px; font-size: 1.1rem; }\r\n    .notification-body { color: #333; margin-bottom: 15px; font-size: 0.95rem; }\r\n    .track-btn {\r\n      background-color: #e74c3c;\r\n      color: white;\r\n      border: none;\r\n      padding: 8px 15px;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      font-weight: bold;\r\n      width: 100%;\r\n      margin-bottom: 5px;\r\n    }\r\n    .track-btn:hover { background-color: #c0392b; }\r\n    .dismiss-btn {\r\n      background: none;\r\n      border: none;\r\n      color: #999;\r\n      cursor: pointer;\r\n      width: 100%;\r\n      font-size: 0.8rem;\r\n    }\r\n    .dismiss-btn:hover { text-decoration: underline; }\r\n    @keyframes slideIn {\r\n      from { transform: translateX(100%); opacity: 0; }\r\n      to { transform: translateX(0); opacity: 1; }\r\n    }\r\n  `}</style>\r\n);\r\n\r\nconst NotificationListener = () => {\r\n  const [notification, setNotification] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // 1. Connect to socket\r\n    const socket = io('http://localhost:5000');\r\n\r\n    // 2. Listen for the 'receiveNotification' event from the server\r\n    socket.on('receiveNotification', (data) => {\r\n      // Play a sound (optional, might be blocked by browsers until interaction)\r\n      try {\r\n        const audio = new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg');\r\n        audio.play().catch(e => console.log(\"Audio play failed (user interaction needed)\"));\r\n      } catch (e) { }\r\n\r\n      setNotification(data);\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, []);\r\n\r\n  const handleTrackClick = () => {\r\n    if (notification) {\r\n      navigate(`/track/${notification.tripId}`);\r\n      setNotification(null); // Clear notification after clicking\r\n    }\r\n  };\r\n\r\n  if (!notification) return null;\r\n\r\n  return (\r\n    <>\r\n      <NotificationStyles />\r\n      <div className=\"notification-popup\">\r\n        <div className=\"notification-header\">⚠️ SAFETY ALERT</div>\r\n        <div className=\"notification-body\">\r\n          {notification.message}\r\n        </div>\r\n        <button className=\"track-btn\" onClick={handleTrackClick}>\r\n          TRACK LIVE LOCATION\r\n        </button>\r\n        <button className=\"dismiss-btn\" onClick={() => setNotification(null)}>\r\n          Dismiss\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotificationListener;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}